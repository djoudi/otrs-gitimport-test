<section>
<title>Install OTRS 1.0 on Win32</title>
<para>This How-To installs the <ulink url="http://otrs.org">Open Ticket Request System OTRS</ulink>, <emphasis>version 1.0</emphasis> on systems running <emphasis>Win32</emphasis>. I tested it on Windows 2000, it should run on Windows 98, 98SE, ME, NT4 and XP, too.</para>
<note><title>Command Boxes</title>
<para>Throughout this document, we will need to enter commands directly into the system quite often. We do this in a so called <emphasis>command box</emphasis>. Other names are <emphasis>command line</emphasis>, <emphasis>(DOS) prompt</emphasis> or <emphasis>shell</emphasis>. Here is how to invoke a command box on Windows:</para>
<para>Click <emphasis>Start</emphasis>, then <emphasis>Execute</emphasis> and enter <userinput>cmd</userinput> in the dialogue box popping up. Hit <userinput>Return</userinput> on your keyboard or click <emphasis>OK</emphasis>. A (usually black) box appears, showing something similar to this:</para>
<para><screen>
Microsoft Windows 2000 [Version 5.00.2195]
(C) Copyright 1985-2000 Microsoft Corp.

C:\>
</screen></para>
<para>You may now enter commands such as</para>
<para><screen>
Microsoft Windows 2000 [Version 5.00.2195]
(C) Copyright 1985-2000 Microsoft Corp.

C:\><userinput>cd /d d:\otrs\bin\cgi-bin</userinput>

D:\otrs\bin\cgi-bin><userinput>dir</userinput>
<computeroutput> Datentr&auml;ger in Laufwerk D: ist Aurelia
 Datentr&auml;gernummer: C8F1-F408

 Verzeichnis von D:\otrs\bin\cgi-bin

20.01.03  00:20         &lt;DIR&gt;          .
20.01.03  00:20         &lt;DIR&gt;          ..
08.06.02  23:37                     10 .cvsignore
18.01.03  02:14                     20 .htaccess
09.01.03  16:06                 20.734 customer.pl
09.01.03  16:06                 19.014 index.pl
03.01.03  17:17                  4.203 installer.pl
03.01.03  17:17                  5.450 pic.pl
               6 Datei(en)         49.431 Bytes
               2 Verzeichnis(se),   9.825.726.464 Bytes frei
</computeroutput>
D:\otrs\bin\cgi-bin>
</screen></para>
<para>This will bring you to your OTRS executable directory and show it's contents. The <emphasis>/d</emphasis> switch tells Windows to also change the drive letter, if necessary, i.e. to directly switch to the given directory.</para>
<para>Please note that this is a <emphasis>sample output only</emphasis>, and it's from my box, a german Windows 2000 installation, as you see. It will probably look different on your box.</para>
<para>You can customize the appearance of command boxes by clicking in the upper left corner of the window and choose <userinput>Properties</userinput>.</para>
<para>It will help if you get a little bit comfortable with command boxes and working from the command line in general. <ulink url="http://www.google.com/search?num=100&amp;newwindow=1&amp;q=%22command+line%22+%22learning+resources%22+windows">Search with Google for help with command lines</ulink>.</para>
</note>

<section>
<title>Installations</title>
<para>You will need four main components on your system, a webserver (<ulink url="http://www.sambar.com/">Sambar Server</ulink> or/and <ulink url="http://apache.org/">Apache</ulink>), a database (<emphasis>MySQL</emphasis>), an MTA  (=Mail Transfer Agent, <emphasis>exim</emphasis> from the UN*X emulation <emphasis>Cygwin</emphasis>) and a programming language (<emphasis>Perl</emphasis>).</para>
<para>The whole installation will assumingly take place on drive D:, but you may install wherever you like, for sure.</para>

<section>
<title>Install Cygwin (exim)</title>
<para>Install Cygwin using their <ulink url="http://www.cygwin.com/setup.exe">http://www.cygwin.com/setup.exe</ulink>. Choose the following as option. Leave everything else on their defaults or suit it to your needs.</para>
<para><screen><computeroutput>Choose A Download Source:</computeroutput>
  <userinput>Install from Internet</userinput>
<computeroutput>Select Root Install Directory:</computeroutput>
  <userinput>d:\cygwin</userinput>
<computeroutput>Install for:</computeroutput>
  <userinput>All Users</userinput>
<computeroutput>Default Text File Type:</computeroutput>
  <userinput>Unix</userinput>
<computeroutput>Select Local Package Directory:</computeroutput>
  <userinput>d:\cygwin\packages</userinput>
<computeroutput>Select Packages:</computeroutput></screen></para>
<para>If you have got enough disk space, a fast internet connection and/or lots of time, I'd advice you to just install everything. If for any reason you don't want to take advantage of this great Un*x software, be sure to at least install the package <computeroutput>exim</computeroutput> from its category <emphasis>Mail</emphasis>. Install this one and the default packages (marked <emphasis>Keep</emphasis>), for sure.</para>
</section>

<section>
<title>Install PERL</title>
<para>Download <emphasis>Perl</emphasis>, <emphasis>Version 5.6.1 build 633</emphasis> from <ulink url="http://www.activestate.com/Products/Download/Download.plex?id=ActivePerl">http://www.activestate.com/Products/Download/Download.plex?id=ActivePerl</ulink>. I recommend chosing the MSI version.</para>
<para>Install Perl using the default values to <emphasis>D:\Perl</emphasis>.</para>
<section>
<title>Install Additional PERL Packages</title>
<para>Download the following ZIP-packages from <ulink url="http://www.activestate.com/PPMPackages/zips/6xx-builds-only/">http://www.activestate.com/PPMPackages/zips/6xx-builds-only/</ulink>:</para>
<para><screen>
DBD-Mysql.zip
DBI.zip
IO-Stringy.zip</screen></para>
<para>Unzip all files to <emphasis>D:\Perl\packages</emphasis>.</para>
<caution>
<title>Caution!</title>
<para>Every directory contains a README, which will be overwritten by the following one. If you want to read each README you should rename it directly after unzipping each package.</para>
</caution>
<para>Download <ulink url="http://www.robertkehl.de/otrs/RC2-mod_perl-Win32.zip">mod_perl</ulink> from <ulink url="http://www.robertkehl.de/otrs">robertkehl.de/otrs</ulink> and unpack it into <computeroutput>D:\Perl\packages</computeroutput>.</para>
</section>
</section>

<section>
<title>Choosing And Installing The Webserver</title>
<para>OTRS requires a minimum of one webserver to run ;) You may choose the one of your choice, it will probably run on every perl-enabled webserver. I tested it on <ulink url="http://www.sambar.org">Sambar</ulink> <ulink url="http://sambar.robertkehl.de">5.2 &amp; above</ulink> and on <ulink url="http://httpd.apache.org/">Apache</ulink>, both <ulink url="http://httpd.apache.org/docs/">1.3</ulink> and <ulink url="http://httpd.apache.org/docs-2.0/">2.0</ulink>. <computeroutput>mod_perl</computeroutput> is only availabe for Apache. Currently, only mod_perl-1.0 on Apache 1.3.27 is working ok for OTRS, mod_perl-2.0 regrettably not.</para>

<section>
<title>Installing Apache</title>

<para>Download the <ulink url="http://www.apache.org">Apache</ulink> of your choice (<ulink url="http://www.apache.org/dist/httpd/binaries/win32/apache_1.3.27-win32-x86-no_src.msi">1.3.27</ulink> and/or <ulink url="http://www.apache.org/dist/httpd/binaries/win32/apache_2.0.43-win32-x86-no_ssl.msi">2.0.43</ulink>) and install it/them. I recommend you choose <userinput>D:\Apache</userinput> as root for *both* versions. The resulting directory structure will be:</para>
<para><screen>
<computeroutput>D:\Apache\</computeroutput>           --- home of both
<computeroutput>D:\Apache\Apache\</computeroutput>    --- home of Apache 1.3
<computeroutput>D:\Apache\Apache2\</computeroutput>   --- home of Apache 2.0
</screen></para>

<tip>
<para>You may install both 1.3 and 2.0 on the very same machine, they can both be running and may both be used at the same time, if you like to. All you have to do is to ensure they are not configured to run on the same port. The second installation willing to start on port 80 won't succeed in doing so. So configure Apache 1.3 to run on port 80, Apache 2.0 to run on port 81. You could even configure the Sambar webserver (see different section in this manual) to run on port 82, if you'd like to, or choose your own port configuration. Surely one webserver running one version would be enough - the rest is for geeks ;)</para>
</tip>

</section>

<section>
<title>Install Sambar Server</title>
<para>Download Sambar Server from <ulink url="http://sambar.robertkehl.de">http://sambar.robertkehl.de</ulink>, the home page is <ulink url="http://www.sambar.com">http://www.sambar.com</ulink>. I recommend using version 5.2 Production, surely any later version will do, too. Do not use any version prior to 5.2 Production!</para>
<para>Read the security notes on <ulink url="http://www.sambar.com/syshelp/security.htm">http://www.sambar.com/syshelp/security.htm</ulink> and install Sambar, where you like to, <emphasis>D:\Sambar</emphasis> is a good choice.</para>
<para>If you're running Windows NT4, 2000 or XP, you can and should install Sambar as a Service, if the install routine hasn't done so yet. Therefore you open a command box. You enter the following:</para>
<para><screen>
C:\><userinput>cd /d d:\sambar\bin</userinput>
D:\sambar\bin><userinput>ntserver.exe -i -s Sambar</userinput>
</screen></para>
<para>Now start Sambar using the built-in service administration panel or by entering:</para>
<para><screen>
D:\sambar\bin><userinput>net start Sambar</userinput>
</screen></para>
<para>On Win9x/ME, you start Sambar clicking <emphasis>Start</emphasis> -&gt; <emphasis>Programs</emphasis> -&gt; <emphasis>Sambar Server</emphasis> -&gt; <emphasis>Start Sambar Server</emphasis>. There are no services on Win9x/ME.</para>
<para>Ensure that Sambar is running: <ulink url="http://localhost">http://localhost</ulink>. The documentation can be found here: <ulink url="http://localhost/syshelp/index.htm">http://localhost/syshelp/index.htm</ulink>. The system administration forms are here: <ulink url="http://localhost/session/adminlogin?RCpage=/sysadmin/index.stm">http://localhost/session/adminlogin?RCpage=/sysadmin/index.stm</ulink>.</para>
<important>
<para>Ensure to *now* set the admin password to prevent others using your Sambar in a malicious way. You do this on the sysadmin forms under <emphasis>User Management</emphasis>. Good Passwords are longer than eight keystrokes and look like this: <userinput>sie.&amp;Fh9w_iG</userinput></para></important>
</section>

</section>

<section>
<title>Install MySQL</title>
<para>Download MySQL from <ulink url="http://www.mysql.com/downloads/mysql-3.23.html">http://www.mysql.com/downloads/mysql-3.23.html</ulink> and install it in <emphasis>D:\mysql</emphasis>, under Win 2000/XP as a service, too. Start it.</para>
<para>For a more comfortable configuration interface I recommend installing phpMyAdmin from <ulink url="http://www.phpmyadmin.net">http://www.phpmyadmin.net</ulink>, too, location: <emphasis>D:\mysql\phpMyAdmin</emphasis>. This will require <ulink url="http://www.php.net">PHP</ulink> to be installed, which always is a very good idea.</para>
<para>We change the passwort for root later.</para>
</section>

<section>
<title>Install OTRS</title>
<para>Last but least - the beast!</para>
<para>Download OTRS as a tarball (.tar.gz): <ulink url="http://otrs.org/pages/index.pl?Site=Download">http://otrs.org/pages/index.pl?Site=Download</ulink>.</para>
<para>We have to install this tarball manually, because there is a file &quot;INSTALL&quot; in it, who has the same name like the directory &quot;install&quot;, which is also contained. Un*x differentiates between the two - Windows doesn't. In addition, the thee files .fetchmailrc, .mailfilter and .procmailrc are doubled, your unzip program will complain about this. Future releases will allow automic unzipping.</para>
<para>Open the tarball using WinRAR (<ulink url="http://www.rarlab.com">http://www.rarlab.com</ulink>), Winzip (<ulink url="http://www.winzip.com">http://www.winzip.com</ulink>) or a similar software. Unzip the files <computeroutput>.fetchmailrc</computeroutput>, <computeroutput>.mailfilter</computeroutput>, <computeroutput>.procmailrc</computeroutput> and <computeroutput>INSTALL</computeroutput> to <emphasis>d:\otrs\</emphasis>. Rename <computeroutput>INSTALL</computeroutput> to <computeroutput>INSTALL.txt</computeroutput>. Now unzip the rest of the archive to <emphasis>d:\otrs\</emphasis>.</para>

</section>

</section>

<section>
<title>Configuration</title>

<section>
<title>Configuring Cygwin (exim)</title>
<para>Open the file <emphasis>D:\cygwin\etc\exim.conf</emphasis> and search for this line:</para>
<para><screen>  begin routers</screen></para>
<para>Directly beneath you enter the following:</para>
<para><screen># Send all mail to a smarthost
  smarthost:
  driver = accept
  transport = remote_smtp</screen></para>
<para>Underneath this:</para>
<para><screen>  begin transports</screen></para>
<para>you note:</para>
<para><screen>
remote_smtp:
  driver = smtp
  hosts = smtp.yourprovider.com</screen></para>
<para>Now <emphasis>exim</emphasis> will send each incoming message to the relay server of your provider. By now you can't forward messages to Sambar. In future we won't need <emphasis>exim</emphasis> and Cygwin at all, because OTRS will have it's own SMTP module included.</para>
<para>Now you change the access rights for <emphasis>D:\cygwin\etc\exim.conf</emphasis> using <emphasis>chmod</emphasis> from Cygwin:</para>
<para><screen>
C:\><userinput>cd /d d:\cygwin</userinput>
D:\cygwin><userinput>cygwin</userinput>
D:\cygwin><userinput>chown SYSTEM /etc/exim.conf</userinput>
D:\cygwin><userinput>chmod 755 /etc/exim.conf</userinput>
</screen></para>
<para>That's it for <emphasis>exim</emphasis> and <emphasis>Cygwin</emphasis>.</para>
</section>

<section>
<title>Configuring Perl</title>
<para>We now patch our Perl because it doesn't suit our needs in the default installation, there are some so called &quot;packages&quot; missing.</para>
<para>Open a command box and enter this:</para>
<para><screen>
C:\><userinput>cd /d D:\Perl\packages</userinput>

D:\Perl\packages><userinput>ppm</userinput>
PPM interactive shell (2.1.6) - type 'help' for available commands.
PPM&gt; <userinput>install DBI.ppd</userinput>
Install package 'DBI.ppd?' (y/N): <userinput>y</userinput>
  [...returned ouput snipped...]
PPM&gt; <userinput>install IO-stringy.ppd</userinput>
Install package 'IO-Stringy.ppd?' (y/N): <userinput>y</userinput>
  [...returned ouput snipped...]
PPM&gt; <userinput>install DBD-Mysql.ppd</userinput>
Install package 'DBD-Mysql.ppd?' (y/N): <userinput>y</userinput>
  [...returned ouput snipped...]
PPM&gt; <userinput>install mod_perl.ppd</userinput>
Install package 'mod_perl.ppd?' (y/N): <userinput>y</userinput>
  [...returned ouput snipped...]</screen></para>
<para>The install routine for <computeroutput>mod_perl</computeroutput> will ask you where to copy <computeroutput>mod_perl.so</computeroutput>. Please enter the absolute path to the directory <computeroutput>modules</computeroutput> in your Apache installation, i.e. <userinput>d:/Apache/Apache/modules</userinput>.</para>
<para>Your Perl should now look like this or even better:</para>
<para><screen>PPM&gt; <userinput>query</userinput>
    Archive-Tar      [0.072  ]
    Compress-Zlib    [1.16   ]
    DBD-Mysql        [1.2200 ]
    DBI              [1.32   ]
    Digest           [1      ]
    Digest-HMAC      [1.01   ]
    Digest-MD2       [2      ]
    Digest-MD4       [1.1    ]
    Digest-MD5       [2.20   ]
    Digest-SHA1      [2.01   ]
    File-CounterFile [0.12   ]
    Font-AFM         [1.18   ]
    HTML-Parser      [3.26   ]
    HTML-Tagset      [3.03   ]
    HTML-Tree        [3.11   ]
    IO-stringy       [2.108  ]
    MD5              [2.02   ]
    MIME-Base64      [2.12   ]
    PPM              [2.1.6  ]
    SOAP-Lite        [0.55   ]
    Storable         [1.0.12 ]
    Tk               [800.023]
    URI              [1.19   ]
    XML-Parser       [2.27   ]
    XML-Simple       [1.06   ]
    libwin32         [0.19.1 ]
    mod_perl         [1.27_01-dev]
PPM&gt; <userinput>quit</userinput>
Quit!
</screen></para>
<para>You may now delete the files in D:\Perl\packages, if you want to, but you don't have to.</para>
<para>That's it for Perl.</para>
</section>

<section>
<title>Configuring The Webserver</title>
<para>Again we differentiate between Apache and Sambar. Remeber you can have both running or switch around if you like.</para>

<section>
<title>Configuring Apache</title>

<para>In the following, I will refer to 'Apache' only, the process is the same for both versions 1.3 and 2.0.</para>
<para>Open Apache's configuration file <userinput>httpd.conf</userinput>, it is located in <userinput>d:\Apache\Apache\conf\</userinput>. Append these lines to the end of the file, adjust them to your needs:</para>
<para><screen>
# uncomment the following two for Apache2!
LoadModule perl_module modules/mod_perl.so
AddModule mod_perl.c

### added for OTRS (http://otrs.org/)

&lt;IfModule mod_alias.c&gt;
	Alias /otrs/ "d:/otrs/bin/cgi-bin/"
	PerlModule Apache::Registry
&lt;/IfModule&gt;

&lt;Location /otrs&gt;
	Options ExecCGI
	Order deny,allow
	Deny from all
	allow from 127.0.0.1

	SetHandler cgi-script
	ScriptInterpreterSource registry

	&lt;IfModule mod_perl.c&gt;
		SetHandler  perl-script
		PerlHandler Apache::Registry
		PerlSendHeader On
	&lt;/IfModule&gt;

&lt;/Location&gt;

# load all otrs modules
Perlrequire d:/otrs/scripts/apache-perl-startup.pl

# MaxRequestsPerChild (so no apache child will be to big!)
#MaxRequestsPerChild 400
# depends on your RAM
</screen></para>
<para>Take a little time to configure the rest of <computeroutput>httpd.conf</computeroutput>, too. Open <computeroutput>d:\otrs\scripts\apache-perl-startup.pl</computeroutput> and change these lines:</para>
<para><screen>
1:
#! D:/Perl/bin/perl
10,11:
use lib "d:/otrs/";
use lib "d:/otrs/Kernel/cpan-lib";
38,39:
#use Kernel::System::AuthSession::IPC;
use Kernel::System::AuthSession::DB;
46,47:
#use Kernel::System::Log::SysLog;
use Kernel::System::Log::File;
</screen></para>

<note>
<title>About mod_perl_2.0 on Apache2</title>
<para>At this moment, OTRS under mod_perl_2.0 isn't running smoothly on Win32, so perl is used as a CGI process on Apache2 only. We are fully aware that mod_perl_2.0 should be used to efficiently speed things up, and we're in the process of getting it to work. Please be patient or try mod_perl yourself. <ulink url="mailto:otrs-win32@robertkehl.de?subject?mod_perl">Let us know</ulink> if you succeed :)</para>
</note>

<para>That's it for Apapche. (Re-)Start your installation(s) using the Apache monitor, proabably located in your task bar. Sometimes it's a good idea to restart the whole box.</para>
</section>

<section>
<title>Configuring Sambar</title>
<para>We now configure our webserver <emphasis>Sambar</emphasis>. Open the file <emphasis>D:\Sambar\config\mappings.ini</emphasis> and create these entries:</para>
<para><screen>[aliases]
/mysql = d:/mysql/Docs
/phpMyAdmin = d:/mysql/phpMyAdmin

[cgi-aliases]
/otrs/ = /otrs/bin/cgi-bin/
/obin/ = /otrs/bin/</screen></para>
<para>In <emphasis>D:\Sambar\config\config.ini</emphasis> you set values shown beneath::</para>
<para><screen>[common]
Trace Level = INFO
Trace Performance = true
Network Trace Level = None
Dynamic IP Test = true
License =
Licensee =
DNS Primary = IPadresse.DNS1.beideinem.Provider
DNS Secondary = IPadresse.DNS2.beideinem.Provider

[server]
System Administrator = admin
System Administrator IP = 127.0.0.1
Act As HTTP Server = true
Act As HTTPS Server = false
Act As DNS Server = false
Act As DHCP Server = false
Act As Mail Server = false
Act As TFTP Server = false
Act As FTP Server = false
Act As FTPS Server = false
Act As FTP Proxy = false
Act As NNTP Proxy = false
Act As SMTP Proxy = false
Act As POP3 Proxy = false
Act As IMAP4 Proxy = false
Act As Bridge Proxy = false
Act As SOCKS Proxy = false
Act As Telnet Server = false
Trace FTP = true
Trace TFTP = true
Trace Bridge = true
Trace DHCP = true
Trace DNS = true
SMTP Server = smtp.deinprovider.de
DOT-File Security = true

[http]
Act As HTTP Proxy = false
Trace Proxy Usage = true
Trace Requests = true
Log Format = performance
Don't Log IPs = 127.0.0.1
Default Page = index.pl index.php index.stm index.shtml index.shtm index.sht index.htm index.html
Perl Executable = D:/Perl/bin/perl.exe
CGI Extensions = *.pl
Enforce .htaccess = true

[events]
Monitor Invalid Logins = true
Monitor Invalid Requests = true
Share User Logins = true
Trace User Logins = true</screen></para>
<para>Restart Sambar for the changes to take affect.</para>
<note>
<title>Note:</title>
<para>At the very moment we do not use the <emphasis>mail server</emphasis> of Sambar, nor the <emphasis>DNS server</emphasis>. To use them right now (outside of OTRS), you need a <emphasis>Pro version</emphasis> of Sambar, see <ulink url="http://sambar.com/syshelp/pro.htm">http://sambar.com/syshelp/pro.htm</ulink>. The http functionality is not limited in the freeware version, which is automagically active. Entering this in config.ini will enable the demo version of the Pro version aktiviert, which will run between 9 a.m. and 5 p.m.</para>
<para><screen>[common]
License = demo
Licensee = demo</screen></para>
</note>
<section><title>Securing /otrs/bin</title>
<para>We *have* to secure the alias /obin/ which points to d:\otrs\bin\, holding all of the code useful for hacking the system. I personally do not want to expose these &quot;tools&quot; to everyone.</para>
<para>Create the file <emphasis>d:\otrs\bin\htaccess.txt</emphasis> using Windows Explorer containing just this one line:</para>
<para><screen>
require group root
</screen></para>
<para>Open a command box and enter this:</para>
<para><screen>
C:\><userinput>cd /d d:\otrs\bin</userinput>

D:\otrs\bin><userinput>ren htaccess.txt .htaccess</userinput>
</screen></para>
<para>Now only users belonging to the group &quot;root&quot; and the system itself (CRON jobs f.e.) will be allowed to access the scripts in &quot;d:\otrs\bin&quot;.</para>
</section>
</section>

</section>

<section>
<title>Configuring MySQL</title>
<para>Secure your MySQL by providing good passwords for the users <emphasis>@%</emphasis>, <emphasis>root@%</emphasis> und <emphasis>root@localhost</emphasis>. This can easily be done via <emphasis>phpMyAdmin</emphasis>.</para>
<para>Let's fill the database. You can do this via the command line, as show here (output not shown):</para>
<para><screen>
C:\><userinput>cd /d d:\mysql</userinput>
D:\mysql><userinput>mysql -u root -p password -e 'create database otrs'</userinput>
D:\mysql><userinput>mysql -u root -p password otrs &lt; d:\otrs\install\database\OpenTRS-SQL-win32.mysql.sql</userinput>
D:\mysql><userinput>mysql -u root -p -e 'GRANT ALL PRIVILEGES ON otrs.* TO otrs@localhost IDENTIFIED BY &quot;some-pass&quot; WITH GRANT OPTION;'</userinput>
D:\mysql><userinput>mysqladmin -u root -p password reload</userinput>
</screen></para>
<para>I recommend using phpMyAdmin under <ulink url="http://localhost/phpMyAdmin">http://localhost/phpMyAdmin</ulink> instead of working on the command line. You create the database right on the start screen. Now you click the tab &quot;SQL&quot;, and enter <emphasis>d:\otrs\install\database\OpenTRS-SQL-win32.mysql.sql</emphasis>. Click OK.</para>
<para>Now commit this command:</para>
<para><screen>GRANT ALL PRIVILEGES ON otrs.* TO otrs@localhost IDENTIFIED BY &quot;irgendeinpasswort&quot; WITH GRANT OPTION;</screen></para>
<para>That's it for MySQL, which we provided with the database otrs and the user otrs@localhost.</para>
</section>

<section>
<title>Configuring OTRS</title>

<section><title>CONFIG.PM</title>
<para>Now you teach OTRS s.th. about you. First create your configuration file:</para>
<para><screen>
C:\><userinput>cd /d d:\otrs\Kernel</userinput>
D:\otrs\bin><userinput>copy Config.pm.dist Config.pm</userinput>
</screen></para>
<para>Despite your settings concerning FQDN etc., you set the following in <emphasis>d:\otrs\Kernel\Config.pm</emphasis>:</para>
<para><screen>    # -----------------------------------------------------#
    # Sendmail
    # -----------------------------------------------------#
    $Self-&gt;{Sendmail} = 'd:/cygwin/bin/exim-4.12-2.exe -t -i -f ';
    # -----------------------------------------------------#
    # fs root directory
    # -----------------------------------------------------#
    $Self-&gt;{Home} = 'd:/otrs';
    # ----------------------------------------------------#
    # LogModule                                           #
    # ----------------------------------------------------#
    # (log backend module)
#    $Self-&gt;{LogModule} = 'Kernel::System::Log::SysLog';
    $Self-&gt;{LogModule} = 'Kernel::System::Log::File';
    # param for LogModule Kernel::System::Log::File (required!)
    $Self-&gt;{'LogModule::LogFile'} = '&lt;OTRS_CONFIG_Home&gt;/var/log/otrs.log';
    # -----------------------------------------------------#
    # own config settings                                  #
    # config settings taken from Kernel/Config/Defaults.pm #
    # -----------------------------------------------------#
    # $Self-&gt;{SessionUseCookie} = 0;
    $Self-&gt;{SessionModule} = 'Kernel::System::AuthSession::DB';
</screen></para>
<note>
<title>A note about your FQDN</title>
<para>This is the called <emphasis>Full Qulified Domain Name</emphasis> of your PC, just like your IP adress it's unique across the universe ...ah... internet, I mean. If you're using a dial-up line to connect to the internet, your FQDN will always be a different one each time you dial anew. This is indeed ok for OTRS, but it's not nice if exim announces itself with a wrong name. It can lead to difficulties in mail delivery.</para>
<para> To solve this problem you can use so called <emphasis>Dynamic DNS services</emphasis> like <ulink url="http://www.dyndns.org">http://www.dyndns.org</ulink>. By using a client such as <emphasis>DirectUpdate </emphasis>(<ulink url="http://www.directupdate.net">http://www.directupdate.net</ulink>) you submit your IP adress to <emphasis>dyndns.org</emphasis> each times it changes and can thereby obtain a FQDN, for example <emphasis>gogos-pc.home-ip.net</emphasis>. You can even forward your domain <emphasis>http://www.thisismydomain.com</emphasis> to your home PC. If you got further questions concerning Dynamic DNS services, <ulink url="mailto:otrs-win32@robertkehl.de?subject=Dynamic%20DNS">don't hesitate to ask</ulink> - but now back to OTRS :)</para>
</note>
</section>

<section>
<title>LOG.PM</title>
<para>Now we have to comment five rows in <emphasis>d:\otrs\Kernel\System\Log.pm</emphasis>:</para>
<para><screen>13:
  # use IPC::SysV qw(IPC_PRIVATE IPC_RMID S_IRWXU);
60:
  #    $Self-&gt;{Key} = shmget($Self-&gt;{IPCKey}, $Self-&gt;{IPCSize}, 0777 | 0001000) || die $!;
128,129:
  #        my $String = $Self-&gt;GetLog();
  #        shmwrite($Self-&gt;{Key}, $Data.$String, 0, $Self-&gt;{IPCSize}) || die $!;
143:
  #    shmread($Self-&gt;{Key}, $String, 0, $Self-&gt;{IPCSize}) || die &quot;$!&quot;;</screen></para>
</section>

<section>
<title>VALID.PM</title>
<para>Lastly we tell OTRS where to find our <emphasis>nslookup.exe</emphasis>. In <emphasis>d:\otrs\Kernel\cpan-lib\email\Valid.pm</emphasis> we change the following lines:</para>
<para><screen>16:
  @NSLOOKUP_PATHS = qw( /usr/bin /usr/sbin /bin c:/winnt/system32 );
98:
  return &quot;$path/nslookup.exe&quot; if -x &quot;$path/nslookup.exe&quot; and !-d _;</screen></para>
<para>Now <emphasis>Valid.pm</emphasis> is suitable for Win32 *only*, but that's ok for us :)</para>
</section>

</section>

</section>

<section>
<title>The First Start</title>
<para>Now startup OTRS for the first time. A good idea is to reboot your machine before, remember: You're on Windows ;) Then call <ulink url="http://localhost/otrs/index.pl">http://localhost/otrs/index.pl</ulink> in your favourite browser.</para>
<para>The user name is &quot;root@localhost&quot;, the password is &quot;root&quot;, both without the quotes.</para>
<important>
<para>It's a *very good* idea to *now* change your password on <ulink url="http://localhost/otrs/index.pl?Action=AdminUser">http://localhost/otrs/index.pl?Action=AdminUser</ulink></para>
</important>

<section>
<title>System Email Addresses &amp; POP3</title>
<para>You set your system email addresses here: <ulink url="http://localhost/otrs/index.pl?Action=AdminSystemAddress">http://localhost/otrs/index.pl?Action=AdminSystemAddress</ulink>. These are the addresses your customers lateron use to reach your OTRS.</para>
<para>You create POP3 accounts for each system email here: <ulink url="http://localhost/otrs/index.pl?Action=AdminPOP3">http://localhost/otrs/index.pl?Action=AdminPOP3</ulink></para>
<para><emphasis>Your OTRS is now ready, you can start!</emphasis> Have a look around the interface and work on the test ticket provided.</para>
<para>Now write an email to one of the system email addresses. Enter this in your browser, it provides the email to OTRS. <ulink url="http://localhost/obin/PostMasterPOP3.pl">http://localhost/obin/PostMasterPOP3.pl</ulink>. We will later automate this.</para>
<para>Your email will be visible in the queue <emphasis>Raw</emphasis> - that's here: <ulink url="http://localhost/otrs/index.pl?Action=AgentQueueView">http://localhost/otrs/index.pl?Action=AgentQueueView</ulink>. Answer this first inquiry.</para>
<tip>
<para>It is <emphasis>NO</emphasis> good idea to use one of the System Email Addresses to address the system, this will produce loops.</para>
</tip>
</section>

<section>
<title>Setup CRON Job(s)</title>
<para>At last, we tell Sambar to fetch all POP3-Mail every 10 minutes and pump it into the database. Therefore you enter this in <emphasis>D:\Sambar\config\schedule.ini</emphasis>:</para>
<para><screen>  [cron]
# fetch emails every 10 minutes
*/10 * * * * perl d:/otrs/bin/PostMasterPOP3.pl &amp;
</screen></para>
<important>
<para>The schedule entry will be active 1-2 minutes after saving the file.</para>
</important>
<tip>
<para>You may enter the following CRON jobs at this very moment, too. Their very purpose is described elsewhere in this manual.</para>
<para><screen>  [cron]
# start generic agent every 20 minutes
*/20 * * * * perl d:/otrs/bin/GenericAgent.pl &amp;

# check every 60 min the pending jobs
45 * * * * perl d:/otrs/bin/PendingJobs.pl &amp;

# Rebuild Ticket Index every day
01 01 * * * perl d:/otrs/bin/RebuildTicketIndex.pl &amp;

# delete every six hours old session ids
55 */6 * * * perl d:/otrs/bin/DeleteSessionIDs.pl --expired &amp;

# unlock every hour old locked tickets
35 * * * * perl d:/otrs/bin/UnlockTickets.pl --timeout &amp;
</para></tip>

<note>
<title>No CRON Jobs on Apache</title>
<para>Please note that Apache cannot CRON. You will have to execute the CRON Jobs manually from the command line or by using Windows Task Scheduler. Use the following command for each script to prevent windows popping up at you screen while executing the script. <userinput>cmd /c start /min perl d:\otrs\bin\NameOfCRONJob.pl</userinput></para>
</note>
</section>

</section>

<section>
<title>Done!</title>
<para>Congratulations, you hopefully were successful in installing OTRS on Win32!</para>
<para>If s.th. still is not as clear as it should be or if you are getting nothing more than error messages instead of the interface of OTRS, don't hesitate to mail <ulink url="mailto:otrs-win32@robertkehl.de">otrs-win32 at robertkehl.de</ulink>. Hopefully you get a ticket back ;-)</para>
<para>I would be more enlighted if you'd send some success stories!</para>
<para>Surely this chapter will follow the development of <ulink url="http://otrs.org">OTRS</ulink>. OTRS on Win32 can be done with Apache, too, and I will soon include a part on it.</para>
<para>Have fun using your OTRS on Sambar!</para>
</section>
</section>
