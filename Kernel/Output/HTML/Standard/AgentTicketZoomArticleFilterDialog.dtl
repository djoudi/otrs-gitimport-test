# --
# AgentTicketZoomArticleFilterDialog.dtl - provides a dialog to filter articles
# Copyright (C) 2001-2010 OTRS AG, http://otrs.org/
# --
# $Id: AgentTicketZoomArticleFilterDialog.dtl,v 1.11 2010-07-15 12:39:00 mn Exp $
# --
# This software comes with ABSOLUTELY NO WARRANTY. For details, see
# the enclosed file COPYING for license information (AGPL). If you
# did not receive this file, see http://www.gnu.org/licenses/agpl.txt.
# --

<!--dtl:js_on_document_complete-->
<script type="text/javascript">//<![CDATA[
    Core.UI.RegisterEvent('click', $('#SetArticleFilter'), function (Event) {
        Core.UI.Dialog.ShowContentDialog($('#ArticleFilterDialog'), '$JSText{"Article filter"}', '20px', 'Center', true, [
            {
                Label: "$JSText{"Save"}",
                Function: function () {
                    var Data = Core.AJAX.SerializeForm($('#ArticleFilterDialogForm'));
                    Core.AJAX.FunctionCall(Core.Config.Get('CGIHandle'), Data, function () {
                        location.reload();
                    }, 'text');
                }
            },
            {
                Label: "$JSText{"Reset"}",
                Function: function () {
                    $('#ArticleTypeFilter').val('');
                    $('#ArticleSenderTypeFilter').val('');
                }
            },
        ]);
        return false;
    });
    Core.UI.RegisterEvent('click', $('#ResetArticleFilter'), function (Event) {
        var Data = {
            Action:     'AgentTicketZoom',
            Subaction:  'ArticleFilterSet',
            TicketID:   '$QData{"TicketID"}'
        };
        Core.AJAX.FunctionCall(Core.Config.Get('CGIHandle'), Data, function () {
            location.reload();
        });
    });
//]]></script>
<!--dtl:js_on_document_complete-->

<div id="ArticleFilterDialog" class="Hidden">
    <form action="$Env{"CGIHandle"}" method="post" id="ArticleFilterDialogForm" name="ArticleFilterDialogForm">
        <input type="hidden" value="AgentTicketZoom" name="Action"/>
        <input type="hidden" value="ArticleFilterSet" name="Subaction"/>
        <input type="hidden" value="$QData{"TicketID"}" name="TicketID"/>
        <fieldset class="TableLike">
            <label for="ArticleTypeFilter">$Text{"Article"} $Text{"Type"}:</label>
            <div class="Field">
                $Data{"ArticleTypeFilterString"}
            </div>
            <div class="Clear"></div>
            <label for="ArticleSenderTypeFilter">$Text{"Article"} $Text{"Sender"} $Text{"Type"}:</label>
            <div class="Field">
                $Data{"ArticleSenderTypeFilterString"}
            </div>
            <div class="Clear"></div>
            <label for="SaveDefaults">$Text{"Save filter settings as default"}:</label>
            <div class="Field">
                <input type="checkbox" id="SaveDefaults" name="SaveDefaults" value="1" />
            </div>
        </fieldset>
    </form>
</div>
