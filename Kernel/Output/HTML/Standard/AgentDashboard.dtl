# --
# AgentDashboard.dtl - provides HTML for global dashboard
# Copyright (C) 2001-2010 OTRS AG, http://otrs.org/
# --
# $Id: AgentDashboard.dtl,v 1.32 2010-04-19 22:11:12 mn Exp $
# --
# This software comes with ABSOLUTELY NO WARRANTY. For details, see
# the enclosed file COPYING for license information (AGPL). If you
# did not receive this file, see http://www.gnu.org/licenses/agpl.txt.
# --

# include AJAX lib
$Include{"AJAX"}
<!--dtl:document_ready-->
<script type="text/javascript">//<![CDATA[
var Dashboard = {};

Dashboard.PreferencesUpdate = function( Name, FormName ) {
    var ParamPart = '';
    var Form      = document.forms[FormName];
    for ( F = 0; F < Form.length; F++ ) {
        if ( Form[F] ) {
            var Param = Form[F].value;
            var ParamEncode = encodeURIComponent(Param);
            ParamPart = ParamPart + ';' + Form[F].name + '=' + ParamEncode;
        }
    }
    var url = OTRS.Config.Get('Baselink') + ParamPart;
    var onLoaded = function() {
        UI.Settings( Name + '-setting', Name );
    };
    Core.AJAXContentUpdate( Name, url, false, onLoaded );
    return true;
}
//]]></script>

<script type="text/javascript">//<![CDATA[
    UI.Sortable(
        {
            Selector:        '.ContentColumn',
            Placeholder:     'DropPlaceholder',
            Handle:          '.Header h2',
            UpdateURL:       '$Env{"Baselink"}Action=$Env{"Action"};Subaction=UpdatePosition',
            UpdateOrder:     '.CanDrag',
            UpdateAttribute: 'Backend',
            UpdateValue:     'id'
        }
    );
    UI.Sortable(
        {
            Selector:        '.SidebarColumn',
            Placeholder:     'DropPlaceholder',
            Handle:          '.Header h2',
            UpdateURL:       '$Env{"Baselink"}Action=$Env{"Action"};Subaction=UpdatePosition',
            UpdateOrder:     '.CanDrag',
            UpdateAttribute: 'Backend',
            UpdateValue:     'id'
        }
    );
//]]></script>
<!--dtl:document_ready-->
<!-- dtl:block:Content -->
<div class="MainBox ARIARoleMain LayoutFixedSidebar SidebarLast">
    <h1>$Text{"Dashboard"}</h1>

    <div class="SidebarColumn">

        <div class="WidgetGradient Medium">
            <div class="Header">
                <table border="0" width="100%" cellspacing="0" cellpadding="0">
                    <tr onclick="UI.Accordion('setting', 'setting-expand-down', 'setting-collapse-up'); return false;">
                        <td class="contenthead" width="99%">
                            <h2>$Text{"Settings"}</h2>
                        </td>
                        <td>
                            <div id="setting-expand-down"><a href="#" title="$Text{"Expand"}"><img border="0" src="$Config{"Frontend::ImagePath"}expand-down.png" alt="$Text{"Expand"}"/></a></div>
                            <div id="setting-collapse-up" style="display:none;"><a href="#" title="$Text{"Collapse"}"><img border="0" src="$Config{"Frontend::ImagePath"}collapse-up.png" alt="$Text{"Collapse"}"/></a></div>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="Content">

                <div id="setting" style="display:none;" class="contenthead">
                    <form action="$Env{"CGIHandle"}" method="post" enctype="multipart/form-data">
                        <input type="hidden" name="Action" value="$Env{"Action"}"/>
                        <input type="hidden" name="Subaction" value="UpdateSettings"/>
                        <ul>
<!-- dtl:block:ContentSettings -->
                            <li>
                                <div title="$Text{"$QData{"Description"}"}">
                                    <input type="checkbox" name="Backend" value="$QData{"Name"}" $Data{"Checked"}/> $Text{"$QData{"Title"}"}
                                </div>
                            </li>
<!-- dtl:block:ContentSettings -->
                        </ul>
                        <button class="button" accesskey="g" type="submit" value="$Text{"Save"}">$Text{"Save"}</button>
                    </form>
                </div>

            </div>
        </div>


<!-- dtl:block:ContentSmall -->
        <div class="WidgetGradient CanDrag Short" id="Dashboard$QData{"Name"}-box">
            <div class="Header">
<!-- dtl:block:ContentSmallPreferences -->
                <div class="WidgetAction Settings">
                    <a href="#" onclick="UI.Settings('Dashboard$QData{"Name"}-setting', 'Dashboard$QData{"Name"}'); return false;" title="$Text{"Settings"}"><span></span></a>
                </div>
<!-- dtl:block:ContentSmallPreferences -->
                <div class="WidgetAction Close">
                    <a href="$Env{"Baselink"}Action=$Env{"Action"};Subaction=UpdateRemove;Name=$LQData{"Name"}" title="$Text{"Close"}"><span></span></a>
                </div>
                <h2 title="$Text{"$QData{"Description"}"}">$Text{"$QData{"Title"}"}</h2>
            </div>
            <div class="Content">
                <div id="Dashboard$QData{"Name"}-setting" style="display:none;">

                    <form action="$Env{"CGIHandle"}" method="post" enctype="multipart/form-data" name="Dashboard$QData{"NameForm"}_setting_form">
                        <input type="hidden" name="Action" value="$Env{"Action"}"/>
                        <input type="hidden" name="Subaction" value="UpdatePreferences"/>
                        <input type="hidden" name="Name" value="$QData{"Name"}"/>
                        <table>
<!-- dtl:block:ContentSmallPreferencesItem -->
                            <tr>
<!-- dtl:block:ContentSmallPreferencesItemOption -->
                                <td>$Text{"$QData{"Desc"}"}:</td>
                                <td>$Data{"Option"}</td>
<!-- dtl:block:ContentSmallPreferencesItemOption -->
<!-- dtl:block:ContentSmallPreferencesItemInput -->
                                <td>$Text{"$QData{"Desc"}"}:</td>
                                <td><input type="text" size="$QData{"Size"}" name="$QData{"NamePref"}" value="$QData{"Data"}"/></td>
<!-- dtl:block:ContentSmallPreferencesItemInput -->
<!-- dtl:block:ContentSmallPreferencesItemTextArea -->
                                <td>$Text{"$QData{"Desc"}"}:</td>
                                <td><textarea rows="$QData{"Rows"}" cols="$Data{"Cols"}" name="$QData{"NamePref"}">$QData{"Data"}</textarea></td>
<!-- dtl:block:ContentSmallPreferencesItemTextArea -->
                            </tr>
<!-- dtl:block:ContentSmallPreferencesItem -->
                            <tr>
                                <td colspan="2">
                                    <button class="button" type="submit" value="$Text{"Submit"}" onclick="Dashboard.PreferencesUpdate('Dashboard$QData{"Name"}','Dashboard$QData{"NameForm"}_setting_form'); return false;">$Text{"Submit"}</button>
                                    <button class="button" type="submit" value="$Text{"Cancel"}" onclick="UI.Settings('Dashboard$QData{"Name"}-setting', 'Dashboard$QData{"Name"}'); return false;">$Text{"Cancel"}</button>
                                </td>
                            </tr>
                        </table>
                    </form>

                </div>

                <div id="Dashboard$QData{"Name"}">
                    $Data{"Content"}
                </div>

<!-- dtl:block:ContentSmallMore -->
                <a href="$Data{"Link"}" title="$Text{"$Data{"LinkTitle"}"}" class="small">$Text{"more"} &#187;</a>
<!-- dtl:block:ContentSmallMore -->
            </div>
        </div>
<!-- dtl:block:ContentSmall -->
    </div>




    <div class="ContentColumn">
<!-- dtl:block:ContentLarge -->
        <div class="WidgetGradient CanDrag Short" id="Dashboard$QData{"Name"}-box">
            <div class="Header">
<!-- dtl:block:ContentLargePreferences -->
                <div class="WidgetAction Settings">
                    <a href="#" onclick="UI.Settings('Dashboard$QData{"Name"}-setting', 'Dashboard$QData{"Name"}'); return false;" title="$Text{"Settings"}"><span></span></a>
                </div>
<!-- dtl:block:ContentLargePreferences -->
                <div class="WidgetAction Close">
                    <a href="$Env{"Baselink"}Action=$Env{"Action"};Subaction=UpdateRemove;Name=$LQData{"Name"}" title="$Text{"Close"}"><span></span></a>
                </div>
                <h2 title="$Text{"$QData{"Description"}"}">$Text{"$QData{"Title"}"}</h2>
            </div>

            <div class="Content">
                <div id="Dashboard$QData{"Name"}-setting" style="display:none;">

                    <form action="$Env{"CGIHandle"}" method="post" enctype="multipart/form-data" name="Dashboard$QData{"NameForm"}_setting_form">
                        <input type="hidden" name="Action" value="$Env{"Action"}"/>
                        <input type="hidden" name="Subaction" value="UpdatePreferences"/>
                        <input type="hidden" name="Name" value="$QData{"Name"}"/>
                        <table>
<!-- dtl:block:ContentLargePreferencesItem -->
                            <tr>
<!-- dtl:block:ContentLargePreferencesItemOption -->
                                <td>$Text{"$QData{"Desc"}"}:</td>
                                <td>$Data{"Option"}</td>
<!-- dtl:block:ContentLargePreferencesItemOption -->
<!-- dtl:block:ContentLargePreferencesItemInput -->
                                <td>$Text{"$QData{"Desc"}"}:</td>
                                <td><input type="text" size="$QData{"Size"}" name="$QData{"NamePref"}" value="$QData{"Data"}"/></td>
<!-- dtl:block:ContentLargePreferencesItemInput -->
<!-- dtl:block:ContentLargePreferencesItemTextArea -->
                                <td>$Text{"$QData{"Desc"}"}:</td>
                                <td><textarea rows="$QData{"Rows"}" cols="$Data{"Cols"}" name="$QData{"NamePref"}">$QData{"Data"}</textarea></td>
<!-- dtl:block:ContentLargePreferencesItemTextArea -->
                            </tr>
<!-- dtl:block:ContentLargePreferencesItem -->
                            <tr>
                                <td colspan="2">
                                    <button class="button" type="submit" value="$Text{"Submit"}" onclick="Dashboard.PreferencesUpdate('Dashboard$QData{"Name"}','Dashboard$QData{"NameForm"}_setting_form'); return false;">$Text{"Submit"}</button>
                                    <button class="button" type="submit" value="$Text{"Cancel"}" onclick="UI.Settings('Dashboard$QData{"Name"}-setting', 'Dashboard$QData{"Name"}'); return false;">$Text{"Cancel"}</button>
                                </td>
                            </tr>
                        </table>
                    </form>

                </div>

                <div id="Dashboard$QData{"Name"}">
                    $Data{"Content"}
                </div>
<!-- dtl:block:ContentLargeMore -->
                <a href="$Data{"Link"}" title="$Text{"$Data{"LinkTitle"}"}" class="small">$Text{"more"} &#187;</a>
<!-- dtl:block:ContentLargeMore -->
            </div>
        </div>
<!-- dtl:block:ContentLarge -->
    </div>

</div>
<!-- dtl:block:Content -->
