# --
# AgentBook.dtl - provides HTML form for AgentBook
# Copyright (C) 2001-2010 OTRS AG, http://otrs.org/
# --
# $Id: AgentBook.dtl,v 1.17 2010-06-28 13:46:31 mn Exp $
# --
# This software comes with ABSOLUTELY NO WARRANTY. For details, see
# the enclosed file COPYING for license information (AGPL). If you
# did not receive this file, see http://www.gnu.org/licenses/agpl.txt.
# --

<!-- start addressbook form -->
<script type="text/javascript">//<![CDATA[

function updateMessage() {
    if (parent.opener.closed) {
        alert('$JSText{"The message being composed has been closed.  Exiting."}');
        this.close();
        return;
    }

    if (!parent.opener.document.compose) {
        alert('$JSText{"This window must be called from compose window"}');
        this.close();
        return;
    }

    parent.opener.document.compose.To.value = document.book.To.value
    parent.opener.document.compose.Cc.value = document.book.Cc.value
    parent.opener.document.compose.Bcc.value = document.book.Bcc.value

    this.close();
}

//]]></script>

<script type="text/javascript">//<![CDATA[

function AddToAddress(x) {
    if (document.book.To.value) {
        document.book.To.value = document.book.To.value + ', ';
    }
    document.book.To.value = document.book.To.value + x;
}

function AddCcAddress(x) {
    if (document.book.Cc.value) {
        document.book.Cc.value = document.book.Cc.value + ', ';
    }
    document.book.Cc.value = document.book.Cc.value + x;
}

function AddBccAddress(x) {
    if (document.book.Bcc.value) {
        document.book.Bcc.value = document.book.Bcc.value + ', ';
    }
    document.book.Bcc.value = document.book.Bcc.value + x;
}

//]]></script>


<div class="WidgetPopup">
    <div class="Content">
        <h1>$Text{"Address Book"}</h1>
        <form id="AdressBook" action="$Env{"CGIHandle"}" method="post" enctype="multipart/form-data">
            <input type="hidden" name="Action" value="AgentBook" />
            <fieldset class="TableLike">
                <label>$Text{"To"}:</label>
                <div class="Field">
                    <input type="text" name="To" id="To" value="$QData{"To"}" class="W75pc" />
                </div>
                <div class="Clear"></div>
                <label>$Text{"Cc"}:</label>
                <div class="Field">
                    <input type="text" name="Cc" id="Cc" value="$QData{"Cc"}" class="W75pc" />
                </div>
                <div class="Clear"></div>
                <label>$Text{"Bcc"}:</label>
                <div class="Field">
                    <input type="text" name="Bcc" id="Bcc" value="$QData{"Bcc"}" class="W75pc" />
                </div>
                <div class="Clear"></div>
                <button type="button" value="$Text{"Apply"}">$Text{"Apply"}</button>
                <button type="button" value="$Text{"Cancel"}">$Text{"Cancel"}</button>
            </fieldset>
            <fieldset class="TableLike SpacingTop">
                <input type="text" name="Search" id="Search" value="" class="W75pc" />
                <input class="button" type="submit" value="$Text{"Search"}"/>
            </fieldset>
<!-- dtl:block:SearchResult -->
            <table class="DataTable SpacingTop">
                <thead>
                    <tr>
                        <th>$Text{"Name"}</th>
                        <th>$Text{"An"}</th>
                        <th>$Text{"Cc"}</th>
                        <th>$Text{"Bcc"}</th>
                    </tr>
                </thead>
                <tbody>
<!-- dtl:block:Row -->
                    <tr>
                        <td>$QData{"Name"}</td>
                        <td><a href="">$Text{"To"}</a></td>
                        <td><a href="">$Text{"Cc"}</a></td>
                        <td><a href="">$Text{"Bcc"}</a></td>
                    </tr>
<!-- dtl:block:Row -->
                </tbody>
            </table>
<!-- dtl:block:SearchResult -->
        </form>
    </div>
</div>
