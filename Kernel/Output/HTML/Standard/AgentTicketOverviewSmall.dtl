# --
# AgentTicketOverviewSmall.dtl - html for ticket overview table
# Copyright (C) 2001-2010 OTRS AG, http://otrs.org/
# --
# $Id: AgentTicketOverviewSmall.dtl,v 1.32 2010-04-09 06:59:26 mn Exp $
# --
# This software comes with ABSOLUTELY NO WARRANTY. For details, see
# the enclosed file COPYING for license information (AGPL). If you
# did not receive this file, see http://www.gnu.org/licenses/agpl.txt.
# --
<!-- dtl:block:DocumentActionRow -->
<ul class="Actions">
<!-- dtl:block:DocumentActionRowBulk -->
    <li class="$QData{"CSS"}"><a href="" onclick="return select_item_check();">$Text{"$QData{"Name"}"}</a></li>
<!-- dtl:block:DocumentActionRowBulk -->
<!-- dtl:block:DocumentActionRowItem -->
    <li class="$QData{"CSS"}"><a href="">$Text{"$QData{"Name"}"}</a></li>
<!-- dtl:block:DocumentActionRowItem -->
</ul>
<!-- dtl:block:DocumentActionRow -->

<!-- dtl:block:DocumentSortOrderBar -->
<div class="OverviewHeader" id="OverviewHeader">
    <table class="TableSmall">
        <thead>
            <tr>
<!-- dtl:block:BulkNavBar -->
                <th class="Checkbox Fixed">
                <form name="matrixnavbar" action="">
                    <input type="checkbox" name="Check" value="" onclick="select_items('TicketID')" autocomplete="off"/>
#           <button type="submit" name="BulkAktion" value="$Text{"Bulk Action"}" class="button" onclick="return select_item_check();" >$Text{"Bulk Action"}</button>
                </form>
                </th>
<!-- dtl:block:BulkNavBar -->
<!-- dtl:block:OverviewNavBarPageFlag -->
                <th class="Fixed"><span class=""></span></th>
<!-- dtl:block:OverviewNavBarPageFlag -->
#                        <th class="UnreadArticles Fixed"><a class="UnreadArticles" href=""><span class="UnreadArticles"></span></a></th>
<!-- dtl:block:OverviewNavBarPageTicketNumber -->
                <th class="TicketNumber $QData{"CSS"}">
                <a name="OverviewControl" href="$Env{"Baselink"}Action=$Env{"Action"};$Data{"LinkSort"};SortBy=TicketNumber;OrderBy=$QData{"OrderBy"}">$Config{"Ticket::Hook"}</a>
                </th>
<!-- dtl:block:OverviewNavBarPageTicketNumber -->
<!-- dtl:block:OverviewNavBarPageAge -->
                <th class="Age $QData{"CSS"}">
                <a name="OverviewControl" href="$Env{"Baselink"}Action=$Env{"Action"};$Data{"LinkSort"};SortBy=Age;OrderBy=$QData{"OrderBy"}">$Text{"Age"}</a>
                </th>
<!-- dtl:block:OverviewNavBarPageAge -->
<!-- dtl:block:OverviewNavBarPageEscalationTime -->
                <th class="EscalationTime $QData{"CSS"}">
                <a name="OverviewControl" href="$Env{"Baselink"}Action=$Env{"Action"};$Data{"LinkSort"};SortBy=EscalationTime;OrderBy=$QData{"OrderBy"}">$Text{"Escalation in"}</a>
                </th>
<!-- dtl:block:OverviewNavBarPageEscalationTime -->
<!-- dtl:block:OverviewNavBarPageLastCustomerSubject -->
                <th class="LastCustomerSubject">$Text{"From"}/$Text{"Subject"}</th>
<!-- dtl:block:OverviewNavBarPageLastCustomerSubject -->
<!-- dtl:block:OverviewNavBarPageTitle -->
                <th class="Title">$Text{"From"}/$Text{"Title"}</th>
<!-- dtl:block:OverviewNavBarPageTitle -->
<!-- dtl:block:OverviewNavBarPageState -->
                <th class="State $QData{"CSS"}">
                <a name="OverviewControl" href="$Env{"Baselink"}Action=$Env{"Action"};$Data{"LinkSort"};SortBy=State;OrderBy=$QData{"OrderBy"}">$Text{"State"}</a>
                </th>
<!-- dtl:block:OverviewNavBarPageState -->
<!-- dtl:block:OverviewNavBarPageLock -->
                <th class="Lock $QData{"CSS"}">
                <a name="OverviewControl" href="$Env{"Baselink"}Action=$Env{"Action"};$Data{"LinkSort"};SortBy=Lock;OrderBy=$QData{"OrderBy"}">$Text{"Locked"}</a>
                </th>
<!-- dtl:block:OverviewNavBarPageLock -->
<!-- dtl:block:OverviewNavBarPageQueue -->
                <th class="Queue $QData{"CSS"}">
                <a name="OverviewControl" href="$Env{"Baselink"}Action=$Env{"Action"};$Data{"LinkSort"};SortBy=Queue;OrderBy=$QData{"OrderBy"}">$Text{"Queue"}</a>
                </th>
<!-- dtl:block:OverviewNavBarPageQueue -->
<!-- dtl:block:OverviewNavBarPageOwner -->
                <th class="Owner $QData{"CSS"}">
                <a name="OverviewControl" href="$Env{"Baselink"}Action=$Env{"Action"};$Data{"LinkSort"};SortBy=Owner;OrderBy=$QData{"OrderBy"}">$Text{"Owner"}</a>
                </th>
<!-- dtl:block:OverviewNavBarPageOwner -->
<!-- dtl:block:OverviewNavBarPageCustomerID -->
                <th class="CustomerID Last $QData{"CSS"}">
                <a name="OverviewControl" href="$Env{"Baselink"}Action=$Env{"Action"};$Data{"LinkSort"};SortBy=CustomerID;OrderBy=$QData{"OrderBy"}">$Text{"CustomerID"}</a>
                </th>
<!-- dtl:block:OverviewNavBarPageCustomerID -->
            </tr>
        </thead>
        <tbody>
            <tr><td></td></tr>
        </tbody>
    </table>
</div>
<!-- dtl:block:DocumentSortOrderBar -->

<!-- dtl:block:DocumentContent -->
<script type="text/javascript">//<![CDATA[
function select_items (Type) {
    for (var i = 1; i < document.matrix.elements[Type].length; i++) {
#        if ( document.matrix.Check.checked || document.matrixnavbar.Check.checked ) {
        if ( document.matrixnavbar.Check.checked ) {
            document.matrix.elements[Type][i].checked = true;
        }
        else {
            document.matrix.elements[Type][i].checked = false;
        }
    }
}
function select_item_check () {
# check if min one ticket is selected (TicketID is no array)
    if ( document.matrix.TicketID.length == undefined && document.matrix.TicketID.checked ) {
        return true;
    }
# check if min one ticket is selected (TicketID is array)
    for (var i = 0; i < document.matrix.TicketID.length; i++) {
        if ( document.matrix.TicketID[i].checked ) {
            return true;
        }
    }
    alert('$JSText{"You need min. one selected Ticket!"}');
    return false;
}
//]]></script>
<!-- start form -->
<div id="OverviewBody" class="Overview">
    <form action="$Env{"CGIHandle"}" method="post" enctype="multipart/form-data" name="matrix">
        <input type="hidden" name="Action" value="AgentTicketBulk"/>
        <input type="hidden" name="TicketID" value=""/>

        <table class="TableSmall">
            <tbody>
<!-- dtl:block:Record -->
                <tr>
<!-- dtl:block:Bulk -->
                    <td class="Checkbox Fixed NonTextContent">
                        <input type="checkbox" name="TicketID" value="$LQData{"TicketID"}"/>
                    </td>
<!-- dtl:block:Bulk -->
<!-- dtl:block:ContentLargeTicketGenericRowMeta -->
                    <td class="$QData{"ClassTable"} Fixed" title="$Text{"$Data{"Title"}"}">
<!-- dtl:block:ContentLargeTicketGenericRowMetaImage -->
                        <div class="$QData{"Class"} Small" title="$Text{"$Data{"Title"}"}">
                            <span class="$QData{"ClassSpan"}">$Text{"$Data{"Title"}"}</span>
                        </div>
#                            <img border="0" src="$Config{"Frontend::ImagePath"}$QData{"Image"}" alt="" title="$Text{"$QData{"Title"}"}"/>
<!-- dtl:block:ContentLargeTicketGenericRowMetaImage -->
                    </td>
<!-- dtl:block:ContentLargeTicketGenericRowMeta -->
                    <td>
                        <a href="$Env{"Baselink"}Action=AgentTicketZoom;TicketID=$Data{"TicketID"}" title="$QData{"Title"}">$Data{"TicketNumber"}</a>
                    </td>
                    <td>
                        $QData{"Age"}$Data{"StopFont"}
                    </td>
<!-- dtl:block:RecordEscalationTime -->
                    <td>
<!-- dtl:block:RecordEscalationTimeFontStart -->
                        <font color="red">
<!-- dtl:block:RecordEscalationTimeFontStart -->
                        $Data{"StartFont"}<div title="$Text{"Service Time"}: $QData{"EscalationTimeWorkingTime"} - $TimeShort{"$QData{"EscalationDestinationDate"}"}">$QData{"EscalationTimeHuman"}<br/>$TimeShort{"$QData{"UpdateTimeDestinationDate"}"}</div>$Data{"StopFont"}
<!-- dtl:block:RecordEscalationTimeFontStop -->
                        </font>
<!-- dtl:block:RecordEscalationTimeFontStop -->
                    </td>
<!-- dtl:block:RecordEscalationTime -->
                    <td>
                        <div title="$QData{"From"}">$RQData{"From","30"}</div>
<!-- dtl:block:RecordLastCustomerSubject -->
                        <div title="$QData{"Subject"}">$QData{"Subject","30"}</div>
<!-- dtl:block:RecordLastCustomerSubject -->
<!-- dtl:block:RecordTicketTitle -->
                        <div title="$QData{"Title"}">$QData{"Title","30"}</div>
<!-- dtl:block:RecordTicketTitle -->
                    </td>
                    <td width="8%">
                        <div title="$Quote{"$Text{"$Data{"State"}"}"}">$Quote{"$Text{"$Data{"State"}"}","30"}</div>
                    </td>
                    <td>
                        <div title="$Quote{"$Text{"$Data{"Lock"}"}"}">$Quote{"$Text{"$Data{"Lock"}"}","30"}</div>
                    </td>
                    <td width="10%">
                        <div title="$QData{"Queue"}">$QData{"Queue","30"}</div>
                    </td>
                    <td>
                        <div title="$QData{"UserFirstname"} $QData{"UserLastname"} ($QData{"Owner"})">$QData{"UserFirstname","15"} $QData{"UserLastname","15"}</div>
                    </td>
                    <td>
                        <a href="$Env{"Baselink"}Action=AgentTicketCustomer;TicketID=$QData{"TicketID"}">
                        <div title="$QData{"CustomerID"}">$QData{"CustomerID","15"}</div>
                        </a>
                        <div title="$QData{"CustomerName"}">$QData{"CustomerName","15"}</div>
                    </td>
                </tr>
<!-- dtl:block:Record -->
            </tbody>
        </table>
#    <button type="submit" name="BulkAktion" value="$Text{"Bulk Action"}" class="button" onclick="return select_item_check();" >$Text{"Bulk Action"}</button>
    </form>
</div>
<!-- dtl:block:DocumentContent -->

<!-- dtl:document_ready -->
<script type="text/javascript">//<![CDATA[
        $(document).ready(function() {
            OTRS.UI.AdjustTableHead($('#OverviewHeader thead'), $('#OverviewBody tbody'));
            OTRS.UI.StaticTableControl($('#OverviewControl'));

            $(window).resize(function() {
                OTRS.UI.AdjustTableHead($('#OverviewHeader thead'), $('#OverviewBody tbody'));
            });
        });
//]]></script>
<!-- dtl:document_ready -->
