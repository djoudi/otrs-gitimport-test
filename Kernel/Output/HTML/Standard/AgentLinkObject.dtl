# --
# AgentLinkObject.dtl - provides HTML for AgentLinkObject mask
# Copyright (C) 2001-2010 OTRS AG, http://otrs.org/
# --
# $Id: AgentLinkObject.dtl,v 1.38 2010-07-14 14:23:42 mn Exp $
# --
# This software comes with ABSOLUTELY NO WARRANTY. For details, see
# the enclosed file COPYING for license information (AGPL). If you
# did not receive this file, see http://www.gnu.org/licenses/agpl.txt.
# --

<!-- dtl:block:Link -->
<div class="WidgetPopup ARIARoleMain">

    <div class="Header">
        <h1>
            $Text{"Link Object: %s", "$Data{"SourceObjectNormal"}"}
        </h1>
        <p>
            <a class="CancelClosePopup" href="">$Text{"Cancel & close window"}</a>

<!-- dtl:block:LinkMenuDelete -->
            $Text{"or"}
            <a href="$Env{"Baselink"}Action=$Env{"Action"};Subaction=LinkDelete;Mode=$LQData{"Mode"};SourceObject=$LQData{"SourceObject"};SourceKey=$LQData{"SourceKey"};TargetIdentifier=$LQData{"TargetIdentifier"}">$Text{"delete links"}</a>
<!-- dtl:block:LinkMenuDelete -->

        </p>
    </div>


    <div class="Content">
        <form action="$Env{"CGIHandle"}" method="get" name="compose">
            <input type="hidden" name="Action" value="$Env{"Action"}" />
            <input type="hidden" name="Mode" value="$QData{"Mode"}" />
            <input type="hidden" name="SourceObject" value="$QData{"SourceObject"}" />
            <input type="hidden" name="SourceKey" value="$QData{"SourceKey"}" />

            <div class="WidgetSimple">
                <div class="Header">
                    <h2>$Text{"Select Target Object"}</h2>
                </div>
                <div class="Content">
                    <fieldset class="TableLike">
                        <label for="TargetIdentifier">
                            $Text{"Link Object"} $QData{"SourceObjectNormal"} $Text{"with"}:
                        </label>
                        <div class="Field">
                            $Data{"TargetObjectStrg"}
<!--dtl:js_on_document_complete-->
<script type="text/javascript">//<![CDATA[
    Core.UI.RegisterEvent('change', $('#TargetIdentifier'), function (Event) {
        $(this).closest('form').submit();
    });
//]]></script>
<!--dtl:js_on_document_complete-->
                            <button class="Primary" type="submit" value="$Text{"Select"}">$Text{"Select"}</button>
                        </div>
                    </fieldset>
                </div>
            </div>

            <div class="WidgetSimple">
                <div class="Header">
                    <h2>$Text{"Search"} $QData{"TargetRealname"}</h2>
                </div>
                <div class="Content">
                    <fieldset class="TableLike">
<!-- dtl:block:LinkSearchRow -->
                        <label>
                            $Text{"$Data{"Name"}"}:
                        </label>
                        <div class="Field">
                            $Data{"InputStrg"}
                        </div>
<!-- dtl:block:LinkSearchRow -->
                        <div class="Field">
                            <button class="Primary" type="submit" name="SubmitSearch" value="$Text{"Search"}">$Text{"Search"}</button>
                        </div>
                    </fieldset>
                </div>
            </div>

<!-- dtl:block:LinkTableComplex -->
            <div class="WidgetSimple">
                <div class="Header">
                    <h2>$Text{"Link Table"}</h2>
                </div>
                <div class="Content">
                    $Data{"LinkTableStrg"}
                </div>
            </div>
<!-- dtl:block:LinkTableComplex -->

        </form>
    </div>

</div>

<!-- dtl:block:Link -->

<!-- dtl:block:Delete -->
<div class="WidgetPopup ARIARoleMain">

    <div class="Header">
        <h1>
            $Text{"Unlink Object: %s", "$QData{"SourceObjectNormal"}"}
        </h1>
        <p>
            <a href="">$Text{"Close window"}</a>
            $Text{"or"}
            <a href="$Env{"Baselink"}Action=$Env{"Action"};Mode=$LQData{"Mode"};SourceObject=$LQData{"SourceObject"};SourceKey=$LQData{"SourceKey"};TargetIdentifier=$LQData{"TargetIdentifier"}" class="menuitem">$Text{"go back"}</a>
        </p>
    </div>

    <div class="Content">
        <div class="WidgetSimple">

            <div class="Header">
                <h2>$Text{"Select Target Object"}</h2>
            </div>

            <div class="Content">

                <form action="$Env{"CGIHandle"}" method="get">
                    <input type="hidden" name="Action" value="$Env{"Action"}" />
                    <input type="hidden" name="Subaction" value="LinkDelete" />
                    <input type="hidden" name="Mode" value="$QData{"Mode"}" />
                    <input type="hidden" name="SourceObject" value="$QData{"SourceObject"}" />
                    <input type="hidden" name="SourceKey" value="$QData{"SourceKey"}" />
                    <input type="hidden" name="TargetIdentifier" value="$QData{"TargetIdentifier"}" />

<!-- dtl:block:DeleteTableComplex -->
                    $Data{"LinkTableStrg"}
<!-- dtl:block:DeleteTableComplex -->

                    <div class="SpacingTop">
                        <button class="Primary" type="submit" name="SubmitDelete" value="$Text{"Delete links"}">$Text{"Delete links"}</button>
                    </div>

                </form>
            </div>
        </div>
    </div>
</div>
<!-- dtl:block:Delete -->
