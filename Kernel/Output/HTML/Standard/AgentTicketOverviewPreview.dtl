# --
# AgentTicketOverviewPreview.dtl - provides HTML Ticket Overview
# Copyright (C) 2001-2010 OTRS AG, http://otrs.org/
# --
# $Id: AgentTicketOverviewPreview.dtl,v 1.22 2010-04-12 23:12:02 martin Exp $
# --
# This software comes with ABSOLUTELY NO WARRANTY. For details, see
# the enclosed file COPYING for license information (AGPL). If you
# did not receive this file, see http://www.gnu.org/licenses/agpl.txt.
# --
<!-- dtl:block:DocumentActionRow -->
<ul class="Actions">
<!-- dtl:block:DocumentActionRowBulk -->
    <li>
        <form action="" name="matrixnavbar">
            <input type="checkbox" class="AutocompleteOff" name="Check" value="" onclick="select_items('TicketID')" />
#           <button type="submit" name="BulkAktion" value="$Text{"Bulk Action"}" class="button" onclick="return select_item_check();" >$Text{"Bulk Action"}</button>
        </form>
    </li>
    <li class="$QData{"CSS"}"><a href="" onclick="return select_item_check();">$Text{"$QData{"Name"}"}</a></li>
<!-- dtl:block:DocumentActionRowBulk -->
<!-- dtl:block:DocumentActionRowItem -->
    <li class="$QData{"CSS"}"><a href="">$Text{"$QData{"Name"}"}</a></li>
<!-- dtl:block:DocumentActionRowItem -->
</ul>
<!-- dtl:block:DocumentActionRow -->


<!-- dtl:block:DocumentSortOrderBar -->
# nothing to show
<!-- dtl:block:DocumentSortOrderBar -->


<!-- dtl:block:DocumentHeader -->
<script type="text/javascript">//<![CDATA[
function select_items (Type) {
    for (var i = 0; i < document.matrix.elements[Type].length; i++) {
        if ( document.matrixnavbar.Check.checked ) {
            document.matrix.elements[Type][i].value = document.bulk[i].elements[Type].value;
            document.bulk[i].elements[Type].checked = true;
        }
        else {
            document.matrix.elements[Type][i].value = '';
            document.bulk[i].elements[Type].checked = false;
        }
    }
}
function select_item (Counter, TicketID) {
    if ( document.matrix.TicketID[Counter].value ) {
        document.matrix.TicketID[Counter].value = '';
    }
    else {
        document.matrix.TicketID[Counter].value = TicketID;
    }
}
function select_item_check () {
    for (var i = 0; i < document.matrix.TicketID.length; i++) {
        if ( document.matrix.TicketID[i].value ) {
            return true;
        }
    }
    alert('$JSText{"You need min. one selected Ticket!"}');
    return false;
}
//]]></script>


<ul id="TicketOverviewLarge" class="Overview OverviewLarge">
<!-- dtl:block:DocumentHeader -->


<!-- dtl:block:DocumentContent -->
    <li id="TicketID_$QData{"TicketID"}">
        <div class="Content">
<!-- dtl:block:Bulk -->
            <form name="bulk" action="">
                <input class="Checkbox AutocompleteOff" type="checkbox" name="TicketID" value="$QData{"TicketID"}" onclick="select_item($QData{"Counter"},$QData{"TicketID"})" />
            </form>
<!-- dtl:block:Bulk -->
<!-- dtl:block:Meta -->
<!-- dtl:block:MetaIcon -->
            <div class="$QData{"Class"}" title="$Text{"$Data{"Title"}"}">
                <span class="$QData{"ClassSpan"}">$Text{"$Data{"Title"}"}</span>
#            <img border="0" src="$Config{"Frontend::ImagePath"}$QData{"Image"}" alt="" title="$Text{"$QData{"Title"}"}"/>
            </div>
<!-- dtl:block:MetaIcon -->
<!-- dtl:block:Meta -->
            <h2>
            <a href="$Env{"Baselink"}Action=AgentTicketZoom;TicketID=$QData{"TicketID"}">$Config{"Ticket::Hook"}: $Data{"TicketNumber"} &ndash; $QData{"Title","60"}</a>
            </h2>
#           <div>
<!-- dtl:block:MenuItem -->
            <a href="$Env{"Baselink"}$Data{"Link"}" $Data{"LinkParam"} onmouseover="window.status='$JSText{"$QData{"Name"}"}'; return true;" onmouseout="window.status='';" class="menuitem" title="$Text{"$QData{"Description"}"}">$Text{"$QData{"Name"}"}</a>
<!-- dtl:block:MenuItem -->
#           </div>
            <table class="Infos">
                <tbody>
                    <tr>
                        <td>
                            <label>$Text{"Age"}</label>$Data{"Age"}
                        </td>
                        <td>
                            <label>$Text{"Queue"}</label><div title="$QData{"Queue"}">$QData{"Queue","26"}</div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label>$Text{"Created"}</label>$TimeLong{"$Data{"Created"}"}
                        </td>
                        <td>
                            <label>$Text{"State"}</label><div title="$Quote{"$Text{"$Data{"State"}"}"}">$Quote{"$Text{"$Data{"State"}"}","26"}</div>
                        </td>
                    </tr>
<!-- dtl:block:Service -->
                    <tr>
                        <td>
                            <label>$Text{"Service"}</label><div title="$QData{"Service"}">$QData{"Service","26"}</div>
                        </td>
                        <td>
<!-- dtl:block:SLA -->
                            <label>$Text{"SLA"}</label><div title="$QData{"SLA"}">$QData{"SLA","26"}</div>
<!-- dtl:block:SLA -->
                        </td>
                    </tr>
<!-- dtl:block:Service -->
                    <tr>
                        <td>
                            <label>$Text{"Owner"}</label><div title="$QData{"UserFirstname"} $QData{"UserLastname"} ($QData{"Owner"})">$QData{"UserFirstname","15"} $QData{"UserLastname","15"}</div>
                        </td>
                        <td>
                            <label>$Text{"Lock"}</label><div title="$Quote{"$Text{"$Data{"Lock"}"}"}">$Quote{"$Text{"$Data{"Lock"}"}","26"}</div>
                        </td>
                    </tr>
                    <tr class="Middle">
                        <td>
                            <label>$Text{"CustomerID"}</label><a href="$Config{"CustomerDBLink"}" $Config{"CustomerDBLinkTarget"}>$Quote{"$Data{"CustomerID"}","26"}</a><br /><div title="$QData{"CustomerName"}">$QData{"CustomerName","15"}</div>
                        </td>
                        <td>
                            <label>$Text{"First Response Time"}</label>
<!-- dtl:block:FirstResponseTime -->
<!-- dtl:block:FirstResponseTimeFontStart -->
                            <font color="red">
<!-- dtl:block:FirstResponseTimeFontStart -->
                            <div title="$Text{"Service Time"}: $QData{"FirstResponseTimeWorkingTime"}">$QData{"FirstResponseTimeHuman"} / $TimeShort{"$QData{"FirstResponseTimeDestinationDate"}"}</div>
<!-- dtl:block:FirstResponseTimeFontStop -->
                            </font>
<!-- dtl:block:FirstResponseTimeFontStop -->
<!-- dtl:block:FirstResponseTime -->
                        </td>
                    </tr>
                    <tr>
                        <td>
<!-- dtl:block:Type -->
                            <label>$Text{"Type"}</label><div title="$QData{"Type"}">$QData{"Type","18"}</div>
<!-- dtl:block:Type -->
                        </td>
                        <td>
                            <label>$Text{"Update Time"}</label>
<!-- dtl:block:UpdateTime -->
<!-- dtl:block:UpdateTimeFontStart -->
                            <font color="red">
<!-- dtl:block:UpdateTimeFontStart -->
                            <div title="$Text{"Service Time"}: $QData{"UpdateTimeWorkingTime"}">$QData{"UpdateTimeHuman"} / $TimeShort{"$QData{"UpdateTimeDestinationDate"}"}</div>
<!-- dtl:block:UpdateTimeFontStop -->
                            </font>
<!-- dtl:block:UpdateTimeFontStop -->
<!-- dtl:block:UpdateTime -->
                        </td>
                    </tr>
                    <tr>
                        <td>

                        </td>
                        <td>
                            <label>$Text{"Solution Time"}</label>
<!-- dtl:block:SolutionTime -->
<!-- dtl:block:SolutionTimeFontStart -->
                            <font color="red">
<!-- dtl:block:SolutionTimeFontStart -->
                            <div title="$Text{"Service Time"}: $QData{"SolutionTimeWorkingTime"}">$QData{"SolutionTimeHuman"} / $TimeShort{"$QData{"SolutionTimeDestinationDate"}"}</div>
<!-- dtl:block:SolutionTimeFontStop -->
                            </font>
<!-- dtl:block:SolutionTimeFontStop -->
<!-- dtl:block:SolutionTime -->
                        </td>
                    </tr>
                </tbody>
            </table>
            <ul class="Preview $QData{"Class"}">
<!-- dtl:block:ArticlePreview -->
                <li class="$QData{"Class"}">
                    <h3>
                    <span class="Wrapper"><a href="" title="$QData{"From"} &ndash; $QData{"Subject"} &ndash; $TimeShort{"$QData{"Created"}"}">$RQData{"From","50"} &ndash; $QData{"Subject","70"}<span class="DateTime">$TimeShort{"$QData{"Created"}"}</span></a></span><span class="RightEnd"></span>
                    </h3>
                    <div class="HiddenBlock">
<!-- dtl:block:ArticlePreviewActionRow -->
                        <div class="ActionRow">
                            <ul class="Actions">
<!-- dtl:block:ArticlePreviewActionRowItem -->
                                <li><a href="$Data{"Link"}">$Text{"$QData{"Name"}"}</a></li>
<!-- dtl:block:ArticlePreviewActionRowItem -->
                            </ul>
                            <div class="ClearLeft"></div>
                        </div>
<!-- dtl:block:ArticlePreviewActionRow -->
                        <div class="Content">
$Data{"BodyNote"}
$Data{"Body"}
                        </div>
                    </div>
                </li>
<!-- dtl:block:ArticlePreview -->
            </ul>
        </div>
        <div class="Shadow"></div>
    </li>

<!-- dtl:block:DISABLE -->
# --
# show FreeKey1-3 and FreeText1-3 (in other way like the block, so you could add link or somethin else)
# --
#<dtl if ($Data{"FreeKey1"} ne "") { $Data{"ArticleFreeString1"} = "<tr><td valign="top"><b>$QData{"FreeKey1"}:</b></td><td> $QData{"FreeText1"}</td></tr>"; }>
#<dtl if ($Data{"FreeKey2"} ne "") { $Data{"ArticleFreeString2"} = "<tr><td valign="top"><b>$QData{"FreeKey2"}:</b></td><td> $QData{"FreeText2"}</td></tr>"; }>
#<dtl if ($Data{"FreeKey3"} ne "") { $Data{"ArticleFreeString3"} = "<tr><td valign="top"><b>$QData{"FreeKey3"}:</b></td><td> $QData{"FreeText3"}</td></tr>"; }>
#     $Data{"ArticleFreeString1"}
#     $Data{"ArticleFreeString2"}
#     $Data{"ArticleFreeString3"}
# show article options like signed, crypted, ...
<!-- dtl:block:ArticleOption-->
    <dtl if ($Data{"Successful"} eq "0") { $Data{"StartFont"} = "<font color="red">"; }>
    <dtl if ($Data{"Successful"} eq "0") { $Data{"StopFont"} = "</font>"; }>
    <dtl if ($Data{"Successful"} eq "1") { $Data{"StartFont"} = "<font color="green">"; }>
    <dtl if ($Data{"Successful"} eq "1") { $Data{"StopFont"} = "</font>"; }>
    <tr>
        <td valign="top" width="15%"><b>$Text{"$Data{"Key"}"}:</b></td>
        <td width="85%"> <div title="$QData{"Value"}">$Data{"StartFont"}$QData{"Value","80"}$Data{"StopFont"}</div></div></td>
    </tr>
<!-- dtl:block:ArticleOption -->
$Data{"BodyNote"}
    <div class="message">
$Data{"Body"}
    </div>
    <table border="0" cellspacing="0" cellpadding="1">
# show TicketFreeKey1-2 and TicketFreeText1-2
<!-- dtl:block:TicketFreeText -->
        <tr valign="top">
            <td><b>$QData{"TicketFreeKey","25"}:</b></td>
            <td>
<!-- dtl:block:TicketFreeTextPlain -->
                <div title="$QData{"TicketFreeText"}">$QData{"TicketFreeText","25"}</div>
<!-- dtl:block:TicketFreeTextPlain -->
<!-- dtl:block:TicketFreeTextLink -->
                <div title="$QData{"TicketFreeText"}"><a href="$Data{"TicketFreeTextLink"}" target="_blank">$QData{"TicketFreeText","25"}</a></div>
<!-- dtl:block:TicketFreeTextLink -->
            </td>
        </tr>
<!-- dtl:block:TicketFreeText -->
#<!-- dtl:block:TicketFreeText1 -->
#          <tr valign="top">
#            <td><b>$QData{"TicketFreeKey1","25"}:</b></td>
#            <td>
#<!-- dtl:block:TicketFreeTextPlain1 -->
#              <div title="$QData{"TicketFreeText1"}">$QData{"TicketFreeText1","25"}</div>
#<!-- dtl:block:TicketFreeTextPlain1 -->
#<!-- dtl:block:TicketFreeTextLink1 -->
#              <div title="$QData{"TicketFreeText1"}"><a href="$Config{"TicketFreeTextLink1"}" target="_blank">$QData{"TicketFreeText1","25"}</a></div>
#<!-- dtl:block:TicketFreeTextLink1 -->
#            </td>
#          </tr>
#<!-- dtl:block:TicketFreeText1 -->
#<!-- dtl:block:TicketFreeText2 -->
#          <tr valign="top">
#            <td><b>$QData{"TicketFreeKey2","25"}:</b></td>
#            <td>
#<!-- dtl:block:TicketFreeTextPlain2 -->
#              <div title="$QData{"TicketFreeText2"}">$QData{"TicketFreeText2","25"}</div>
#<!-- dtl:block:TicketFreeTextPlain2 -->
#<!-- dtl:block:TicketFreeTextLink2 -->
#              <div title="$QData{"TicketFreeText2"}"><a href="$Config{"TicketFreeTextLink2"}" target="_blank">$QData{"TicketFreeText2","25"}</a></div>
#<!-- dtl:block:TicketFreeTextLink2 -->
#            </td>
#          </tr>
#<!-- dtl:block:TicketFreeText2 -->

# use this if you want to show TicketFreeTime1-6
<!-- dtl:block:TicketFreeTime -->
        <tr valign="top">
            <td><b>$Text{"$QData{"TicketFreeTimeKey"}"}:</b></td>
            <td><div title="$TimeShort{"$QData{"TicketFreeTime"}"}">$TimeShort{"$QData{"TicketFreeTime"}"}</div></td>
        </tr>
<!-- dtl:block:TicketFreeTime -->
#<!-- dtl:block:TicketFreeTime1 -->
#          <tr valign="top">
#            <td><b>$Text{"$Config{"TicketFreeTimeKey1"}"}:</b></td>
#            <td><div title="$TimeShort{"$QData{"TicketFreeTime1"}"}">$TimeShort{"$QData{"TicketFreeTime1"}"}</div></td>
#          </tr>
#<!-- dtl:block:TicketFreeTime1 -->
#<!-- dtl:block:TicketFreeTime2 -->
#          <tr valign="top">
#            <td><b>$Text{"$Config{"TicketFreeTimeKey2"}"}:</b></td>
#            <td><div title="$TimeShort{"$QData{"TicketFreeTime2"}"}">$TimeShort{"$QData{"TicketFreeTime2"}"}</div></td>
#          </tr>
#<!-- dtl:block:TicketFreeTime2 -->

    </table>
# show customer info table
<!-- dtl:block:CustomerTable -->
    <div style="margin: 20px 0;"><hr/><b>$Text{"Customer Info"}:</b> $Data{"CustomerTable"}<hr/></div>
<!-- dtl:block:CustomerTable -->
    <br/>
    <table border="0" cellspacing="0" cellpadding="1" width="95%">
        <tr>
            <td>
# show compose links
<!-- dtl:block:AgentAnswer -->
<!-- dtl:block:AgentAnswerCompose -->
                <div style="margin: 20px 0;">
                    <b>$Text{"Compose Answer"} ($Text{"email"}):</b>
                    <br/>
                    <table border="0">
                        <tr align="left">
                            <td>
                                $Data{"StdResponsesStrg"}
                            </td>
                        </tr>
                    </table>
                </div>
<!-- dtl:block:AgentAnswerCompose -->
<!-- dtl:block:AgentAnswerPhoneOutbound -->
                <div style="margin: 20px 0;">
                    <b>$Text{"Contact customer"} ($Text{"phone"}):</b>
                    <br/>
                    <table border="0">
                        <tr align="left">
                            <td>
                                <ul>
                                    <dtl if ($Data{"AgentPhone"} ne "0") { $Data{"AgentPhoneStrg"} = "<li><a href="$Env{"Baselink"}Action=AgentTicketPhoneOutbound;TicketID=$Data{"TicketID"};QueueID=$Data{"QueueID"}" onmouseover="window.status='$JSText{"Phone call"}'; return true;" onmouseout="window.status='';">$Text{"Phone call"}</a></li>"; }>
$Data{"AgentPhoneStrg"}
                                </ul>
                            </td>
                        </tr>
                    </table>
                </div>
<!-- dtl:block:AgentAnswerPhoneOutbound -->
<!-- dtl:block:AgentAnswer -->
            </td>
        </tr>
    </table>
</div>
<div style="margin: 20px 0;">
    <table border="0" cellspacing="0" cellpadding="1" width="95%">
        <tr>
            <td>
<!-- dtl:block:Move -->
                <b>$Text{"Change queue"}:</b>
                <br/>
                <form action="$Env{"CGIHandle"}" method="get">
                    <input type="hidden" name="Action" value="AgentTicketMove"/>
                    <input type="hidden" name="TicketID" value="$QData{"TicketID"}"/>
                    $Data{"MoveQueuesStrg"}
                    <button class="button" type="submit" value="$Text{"Move"}">$Text{"Move"}</button>
                </form>
<!-- dtl:block:Move -->
            </td>
        </tr>
    </table>
</div>
<!-- dtl:block:DISABLE -->

<!-- dtl:block:DocumentContent -->


<!-- dtl:block:DocumentFooter -->
</ul>


<form name="bulk" action="">
<input type="hidden" name="TicketID" value=""/>
</form>

<form action="$Env{"CGIHandle"}" method="post" enctype="multipart/form-data" name="matrix">
<input type="hidden" name="Action" value="AgentTicketBulk"/>
<!-- dtl:block:DocumentFooterBulkItem -->
<input type="hidden" name="TicketID" value=""/>
<!-- dtl:block:DocumentFooterBulkItem -->
<input type="hidden" name="TicketID" value=""/>
#    <button type="submit" name="BulkAktion" value="$Text{"Bulk Action"}" class="button" onclick="return select_item_check();" >$Text{"Bulk Action"}</button>
</form>
<!-- dtl:block:DocumentFooter -->

<!-- dtl:document_ready -->
<!-- dtl:block:DocumentReadyActionRowAdd -->
<script type="text/javascript">//<![CDATA[
OTRS.UI.ActionRow.AddActions('TicketID_$QData{"TicketID"}', $Data{"Data"});
//]]></script>
<!-- dtl:block:DocumentReadyActionRowAdd -->
<!-- dtl:block:DocumentReadyStart -->
    <script type="text/javascript">//<![CDATA[
        $(document).ready(function() {
            OTRS.UI.StaticTableControl($('#OverviewControl'));
            OTRS.UI.Accordion.Init($('ul.Preview'), 'li h3 a', 'div.HiddenBlock');
        });
    //]]></script>
<!-- dtl:block:DocumentReadyStart -->
<!-- dtl:document_ready -->
