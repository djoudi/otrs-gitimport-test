# --
# AgentTicketZoom.dtl - provides HTML for AgentTicketZoom.pm
# Copyright (C) 2001-2010 OTRS AG, http://otrs.org/
# --
# $Id: AgentTicketZoom.dtl,v 1.135 2010-08-11 08:55:48 martin Exp $
# --
# This software comes with ABSOLUTELY NO WARRANTY. For details, see
# the enclosed file COPYING for license information (AGPL). If you
# did not receive this file, see http://www.gnu.org/licenses/agpl.txt.
# --

<!-- dtl:block:ArticleFilterDialog -->
<!--dtl:js_on_document_complete-->
<script type="text/javascript">//<![CDATA[
    $('#SetArticleFilter').bind('click', function (Event) {
        Core.UI.Dialog.ShowContentDialog($('#ArticleFilterDialog'), '$JSText{"Article filter"}', '20px', 'Center', true, [
            {
                Label: "$JSText{"Save"}",
                Function: function () {
                    var Data = Core.AJAX.SerializeForm($('#ArticleFilterDialogForm'));
                    Core.AJAX.FunctionCall(Core.Config.Get('CGIHandle'), Data, function () {
                        location.reload();
                    }, 'text');
                }
            },
            {
                Label: "$JSText{"Reset"}",
                Function: function () {
                    $('#ArticleTypeFilter').val('');
                    $('#ArticleSenderTypeFilter').val('');
                }
            },
        ]);
        return false;
    });
    $('#ResetArticleFilter').bind('click', function (Event) {
        var Data = {
            Action:       'AgentTicketZoom',
            Subaction:    'ArticleFilterSet',
            TicketID:     '$QData{"TicketID"}',
            SaveDefaults: 1
        };
        Core.AJAX.FunctionCall(Core.Config.Get('CGIHandle'), Data, function () {
            location.reload();
        });
    });
//]]></script>
<!--dtl:js_on_document_complete-->
<div id="ArticleFilterDialog" class="Hidden">
    <form action="$Env{"CGIHandle"}" method="post" id="ArticleFilterDialogForm" name="ArticleFilterDialogForm">
        <input type="hidden" value="AgentTicketZoom" name="Action"/>
        <input type="hidden" value="ArticleFilterSet" name="Subaction"/>
        <input type="hidden" value="$QData{"TicketID"}" name="TicketID"/>
        <fieldset class="TableLike">
            <label for="ArticleTypeFilter">$Text{"Article"} $Text{"Type"}:</label>
            <div class="Field">
                $Data{"ArticleTypeFilterString"}
            </div>
            <div class="Clear"></div>
            <label for="ArticleSenderTypeFilter">$Text{"Article"} $Text{"Sender"} $Text{"Type"}:</label>
            <div class="Field">
                $Data{"ArticleSenderTypeFilterString"}
            </div>
            <div class="Clear"></div>
            <label for="SaveDefaults">$Text{"Save filter settings as default"}:</label>
            <div class="Field">
                <input type="checkbox" id="SaveDefaults" name="SaveDefaults" value="1" />
            </div>
        </fieldset>
    </form>
</div>
<!-- dtl:block:ArticleFilterDialog -->

<!-- dtl:block:Header -->
<div class="MainBox ARIARoleMain">
    <div class="ClearLeft"></div>
    <div class="Headline">
        <div class="Flag" title="$Text{"$Data{"Priority"}"}"><span class="PriorityID-$QData{"PriorityID"}">$Text{"$Data{"Priority"}"}</span></div>
        <h1 title="$Text{"Zoom"} $Config{"Ticket::Hook"}: $Data{"TicketNumber"} &ndash; $QData{"Title", "40"}">
            #$Data{"TicketNumber"} <span>&mdash;</span> $QData{"Title", "60"}
        </h1>
    </div>

    <div class="LayoutFixedSidebar SidebarLast">
        <div class="SidebarColumn">
            <div class="WidgetSimple">
                <div class="Header">
                    <h2>Ticket Information</h2>
                </div>
                <div class="Content">
                    <fieldset class="TableLike FixedLabelSmall Tight">
<!-- dtl:block:Type -->
                        <label>$Text{"Type"}:</label>
                        <p class="Value" title="$QData{"Type"}">$QData{"Type","18"}</p>
                        <div class="Clear"></div>
<!-- dtl:block:Type -->
                        <label>$Text{"State"}:</label>
                        <p class="Value" title="$Quote{"$Text{"$Data{"State"}"}"}">$Quote{"$Text{"$Data{"State"}"}","18"}</p>
                        <div class="Clear"></div>

                        <label>$Text{"Locked"}:</label>
                        <p class="Value" title="$Quote{"$Text{"$Data{"Lock"}"}"}">$Quote{"$Text{"$Data{"Lock"}"}","18"}</p>
                        <div class="Clear"></div>

                        <label>$Text{"Priority"}:</label>
                        <p class="Value" title="$Quote{"$Text{"$Data{"Priority"}"}"}">$Quote{"$Text{"$Data{"Priority"}"}","18"}</p>
                        <div class="Clear"></div>

                        <label>$Text{"Queue"}:</label>
                        <p class="Value" title="$QData{"Queue"}">$QData{"Queue","18"}</p>
                        <div class="Clear"></div>

<!-- dtl:block:Service -->
                        <label>$Text{"Service"}:</label>
                        <p class="Value" title="$QData{"Service"}">$QData{"Service","18"}</p>
                        <div class="Clear"></div>
<!-- dtl:block:Service -->
<!-- dtl:block:SLA -->
                        <label>$Text{"SLA"}:</label>
                        <p class="Value" title="$QData{"SLA"}">$QData{"SLA","18"}</p>
                        <div class="Clear"></div>
<!-- dtl:block:SLA -->
                    </fieldset>

                    <fieldset class="TableLike FixedLabelSmall Tight">
<!-- dtl:block:FirstResponseTime -->
                        <label>$Text{"First Response Time"}:</label>
                        <p class="Value">
<!-- dtl:block:FirstResponseTimeFontStart -->
                            <div class="Notice">
<!-- dtl:block:FirstResponseTimeFontStart -->
                                <div title="$Text{"Service Time"}: $QData{"FirstResponseTimeWorkingTime"}">
                                    $QData{"FirstResponseTimeHuman"}
                                    <br/>
                                    $TimeShort{"$QData{"FirstResponseTimeDestinationDate"}"}
                                </div>
<!-- dtl:block:FirstResponseTimeFontStop -->
                            </div>
<!-- dtl:block:FirstResponseTimeFontStop -->
                        </p>
                        <div class="Clear"></div>
<!-- dtl:block:FirstResponseTime -->
<!-- dtl:block:UpdateTime -->
                        <label>$Text{"Update Time"}:</label>
                        <p class="Value">
<!-- dtl:block:UpdateTimeFontStart -->
                            <div class="Notice">
<!-- dtl:block:UpdateTimeFontStart -->
                                <div title="$Text{"Service Time"}: $QData{"UpdateTimeWorkingTime"}">
                                    $QData{"UpdateTimeHuman"}
                                    <br/>
                                    $TimeShort{"$QData{"UpdateTimeDestinationDate"}"}
                                </div>
<!-- dtl:block:UpdateTimeFontStop -->
                            </div>
<!-- dtl:block:UpdateTimeFontStop -->
                        </p>
                        <div class="Clear"></div>
<!-- dtl:block:UpdateTime -->
<!-- dtl:block:SolutionTime -->
                        <label>$Text{"Solution Time"}:</label>
                        <p class="Value">
<!-- dtl:block:SolutionTimeFontStart -->
                            <div class="Notice">
<!-- dtl:block:SolutionTimeFontStart -->
                                <div title="$Text{"Service Time"}: $QData{"SolutionTimeWorkingTime"}">
                                    $QData{"SolutionTimeHuman"}
                                    <br/>
                                    $TimeShort{"$QData{"SolutionTimeDestinationDate"}"}
                                </div>
<!-- dtl:block:SolutionTimeFontStop -->
                            </div>
<!-- dtl:block:SolutionTimeFontStop -->
                        </p>
                        <div class="Clear"></div>
<!-- dtl:block:SolutionTime -->
                    </fieldset>

                    <fieldset class="TableLike FixedLabelSmall Tight">
                        <label>$Text{"CustomerID"}:</label>
                        <p class="Value"><a href="$Config{"CustomerDBLink"}" $Config{"CustomerDBLinkTarget"}>$Quote{"$Data{"CustomerID"}","18"}</a></p>
                        <div class="Clear"></div>

                        <label>$Text{"Accounted time"}:</label>
                        <p class="Value">$Data{"TicketTimeUnits"}</p>
                        <div class="Clear"></div>

<!-- dtl:block:PendingUntil -->
                        <label>$Text{"Pending till"}:</label>
                        <p class="Value">$Data{"PendingUntil"}</p>
                        <div class="Clear"></div>
<!-- dtl:block:PendingUntil -->
<!-- dtl:block:Owner -->
                        <label>$Text{"Owner"}:</label>
                        <p class="Value" title="$QData{"UserFirstname"} $QData{"UserLastname"} ($QData{"UserLogin"})">$Quote{"$Data{"UserFirstname"} $Data{"UserLastname"}","18"}</p>
                        <div class="Clear"></div>

<!-- dtl:block:Owner -->
<!-- dtl:block:Responsible -->
                        <label>$Text{"Responsible"}:</label>
                        <p class="Value" title="$QData{"UserFirstname"} $QData{"UserLastname"} ($QData{"UserLogin"})">$Quote{"$Data{"UserFirstname"} $Data{"UserLastname"}","18"}</p>
                        <div class="Clear"></div>

<!-- dtl:block:Responsible -->
                    </fieldset>
# show TicketFreeKey1-16 and TicketFreeText1-16
                    <fieldset class="TableLike FixedLabelSmall Tight">
<!-- dtl:block:TicketFreeText -->
                        <label>$QData{"TicketFreeKey","25"}:</label>
                        <p class="Value">
<!-- dtl:block:TicketFreeTextPlain -->
                            <span title="$QData{"TicketFreeText"}">$QData{"TicketFreeText","25"}</span>
<!-- dtl:block:TicketFreeTextPlain -->
<!-- dtl:block:TicketFreeTextLink -->
                            <span title="$QData{"TicketFreeText"}"><a href="$Data{"TicketFreeTextLink"}" target="_blank">$QData{"TicketFreeText","25"}</a></span>
<!-- dtl:block:TicketFreeTextLink -->
                        </p>
                        <div class="Clear"></div>
<!-- dtl:block:TicketFreeText -->
#<!-- dtl:block:TicketFreeText1 -->
#          <tr valign="top">
#            <td><b>$QData{"TicketFreeKey1","25"}:</b></td>
#            <td>
#<!-- dtl:block:TicketFreeTextPlain1 -->
#              <span title="$QData{"TicketFreeText1"}">$QData{"TicketFreeText1","25"}</span>
#<!-- dtl:block:TicketFreeTextPlain1 -->
#<!-- dtl:block:TicketFreeTextLink1 -->
#              <span title="$QData{"TicketFreeText1"}"><a href="$Config{"TicketFreeTextLink1"}" target="_blank">$QData{"TicketFreeText1","25"}</a></span>
#<!-- dtl:block:TicketFreeTextLink1 -->
#            </td>
#          </tr>
#<!-- dtl:block:TicketFreeText1 -->
#<!-- dtl:block:TicketFreeText2 -->
#          <tr valign="top">
#            <td><b>$QData{"TicketFreeKey2","25"}:</b></td>
#            <td>
#<!-- dtl:block:TicketFreeTextPlain2 -->
#              <span title="$QData{"TicketFreeText2"}">$QData{"TicketFreeText2","25"}</span>
#<!-- dtl:block:TicketFreeTextPlain2 -->
#<!-- dtl:block:TicketFreeTextLink2 -->
#              <span title="$QData{"TicketFreeText2"}"><a href="$Config{"TicketFreeTextLink2"}" target="_blank">$QData{"TicketFreeText2","25"}</a></span>
#<!-- dtl:block:TicketFreeTextLink2 -->
#            </td>
#          </tr>
#<!-- dtl:block:TicketFreeText2 -->

# use this if you want to show TicketFreeTime1-6
<!-- dtl:block:TicketFreeTime -->
                        <label>$Text{"$Data{"TicketFreeTimeKey"}"}:</label>
                        <p class="Value" title="$TimeShort{"$QData{"TicketFreeTime"}"}">$TimeShort{"$QData{"TicketFreeTime"}"}</p>
                        <div class="Clear"></div>

<!-- dtl:block:TicketFreeTime -->
#<!-- dtl:block:TicketFreeTime1 -->
#          <tr valign="top">
#            <td><b>$Text{"$Config{"TicketFreeTimeKey1"}"}:</b></td>
#            <td><div title="$TimeShort{"$QData{"TicketFreeTime1"}"}">$TimeShort{"$QData{"TicketFreeTime1"}"}</div></td>
#          </tr>
#<!-- dtl:block:TicketFreeTime1 -->
#<!-- dtl:block:TicketFreeTime2 -->
#          <tr valign="top">
#            <td><b>$Text{"$Config{"TicketFreeTimeKey2"}"}:</b></td>
#            <td><div title="$TimeShort{"$QData{"TicketFreeTime2"}"}">$TimeShort{"$QData{"TicketFreeTime2"}"}</div></td>
#          </tr>
#<!-- dtl:block:TicketFreeTime2 -->
                    </fieldset>
                </div>
            </div>
            <div class="WidgetSimple">
                <div class="Header">
                    <h2>$Text{"Customer Information"}</h2>
                </div>
                <div class="Content">
# show customer info table
<!-- dtl:block:CustomerTable -->
                    $Data{"CustomerTable"}
<!-- dtl:block:CustomerTable -->
                </div>
            </div>
<!-- dtl:block:LinkTableSimple -->
            <div class="WidgetSimple DontPrint">
                <div class="Header">
                    <h2>$Text{"Linked Objects"}</h2>
                </div>
                <div class="Content">
# object links
                    $Data{"LinkTableStrg"}
                </div>
            </div>
<!-- dtl:block:LinkTableSimple -->
        </div>
        <div class="ContentColumn">
            <div class="ControlRow">
                <h2>$QData{"ArticleCount"} $Text{"Article(s)"}</h2>
                <div class="AdditionalInformation">
                    $Text{"Age"}: $Data{"Age"} &ndash; $Text{"Created"}: $TimeShort{"$Data{"Created"}"}
                </div>
            </div>
            <div class="ActionRow">
                <ul class="Actions">
<!-- dtl:block:TicketMenu -->
                    <li class="$QData{"Class"}">
                        <a href="$Env{"Baselink"}$Data{"Link"}" class="$QData{"Class"}" $Data{"LinkParam"} title="$Text{"$Data{"Description"}"}">$Text{"$Data{"Name"}"}</a>
                    </li>
<!-- dtl:block:TicketMenu -->
<!-- dtl:block:MoveLink -->
                    <li class="$QData{"Class"}">
                        <form title="$Text{"Move ticket to a different queue"}" action="$Env{"CGIHandle"}" method="get">
                            <input type="hidden" name="Action" value="AgentTicketMove"/>
                            <input type="hidden" name="QueueID" value="$QData{"QueueID"}"/>
                            <input type="hidden" name="TicketID" value="$QData{"TicketID"}"/>
                            <label for="DestQueueID" class="InvisibleText">$Text{"Change queue"}:</label>
                            $Data{"MoveQueuesStrg"}
                        </form>
<!-- dtl:js_on_document_complete -->
<script type="text/javascript">//<![CDATA[
    $('#DestQueueID').bind('change', function (Event) {
        $(this).closest('form').submit();
    });
//]]></script>
<!-- dtl:js_on_document_complete -->
                    </li>
<!-- dtl:block:MoveLink -->
<!-- dtl:block:MoveForm -->
                    <li class="AsPopup">
                        <a href="$Env{"Baselink"}Action=AgentTicketMove;TicketID=$QData{"TicketID"};" class="AsPopup" title="$Text{"Change Queue"}">$Text{"Change Queue"}</a>
                    </li>
<!-- dtl:block:MoveForm -->
                </ul>
                <div class="Clear"></div>
            </div>

            <div id="ArticleTree">
$Data{"ArticleTree"}
            </div>

            <div id="ArticleItems">
$Data{"ArticleItems"}
            </div>

<!-- dtl:block:LinkTableComplex -->
            <div class="WidgetSimple DontPrint SpacingTop">
                <div class="Header">
                    <h2>$Text{"Linked Objects"}</h2>
                </div>
                <div class="Content">
# object links
                    $Data{"LinkTableStrg"}
                </div>
            </div>
<!-- dtl:block:LinkTableComplex -->

        </div>
        <div class="Clear"></div>
    </div>

</div>
<!-- dtl:block:Header -->



<!-- dtl:block:Tree -->
<div id="ArticleTable"  class="FixedHeader">
    <div class="ControlRow">
<!-- dtl:block:ArticleFilterDialogLink -->
        <div class="ArticleFilter Icons">
            <span class="InvisibleText">$Text{"Article"} $Text{"Filter"}:</span>
# Only show one: Set or Reset.
#<!-- dtl:block:ArticleFilterSetLink -->
            <a href="#" id="SetArticleFilter" title="$Text{"Add Filter"}"><span>$Text{"Set"}</span></a>
#<!-- dtl:block:ArticleFilterSetLink -->
<!-- dtl:block:ArticleFilterResetLink -->
            <a class="Active" href="#" id="ResetArticleFilter" title="$Text{"Reset Filter"}"><span>$Text{"Reset"}</span></a>
<!-- dtl:block:ArticleFilterResetLink -->
        </div>
<!-- dtl:block:ArticleFilterDialogLink -->
        <div class="ArticleView Icons">
            <span class="InvisibleText">$Text{"Article"} $Text{"View"}:</span>
<!-- dtl:block:Expand -->
            <a class="OneArticle Active" href="$Env{"Baselink"}Action=AgentTicketZoom;TicketID=$LQData{"TicketID"};ArticleID=$LQData{"ArticleID"};ZoomExpand=0" title="$Text{"Show one article"}"><span>$Text{"Show one article"}</span></a>
            <a class="AllArticles" href="$Env{"Baselink"}Action=AgentTicketZoom;TicketID=$LQData{"TicketID"};ArticleID=$LQData{"ArticleID"};ZoomExpand=1" title="$Text{"Show all articles"}"><span>$Text{"Show all articles"}</span></a>
<!-- dtl:block:Expand -->
<!-- dtl:block:Collapse -->
            <a class="OneArticle" href="$Env{"Baselink"}Action=AgentTicketZoom;TicketID=$LQData{"TicketID"};ArticleID=$LQData{"ArticleID"};ZoomExpand=0" title="$Text{"Show one article"}"><span>$Text{"Show one article"}</span></a>
            <a class="AllArticles Active" href="$Env{"Baselink"}Action=AgentTicketZoom;TicketID=$LQData{"TicketID"};ArticleID=$LQData{"ArticleID"};ZoomExpand=1" title="$Text{"Show all articles"}"><span>$Text{"Show all articles"}</span></a>
<!-- dtl:block:Collapse -->
        </div>
        <div class="Clear"></div>
    </div>
    <div id="ArticleTableBody" class="ActionRow">
        <div class="Scroller">
            <table id="FixedTable" class="TableSmall">
                <thead>
                    <tr>
                        <th class="UnreadArticles"><a class="UnreadArticles" href="#" title="$Text{"Unread articles"}"><span class="UnreadArticles"></span></a></th>
                        <th class="No Sortable InitialSorting"><a href="#">$Text{"No."}</a></th>
                        <th class="Type Sortable"><a href="#">$Text{"Type"}</a></th>
                        <th class="Direction Sortable"><a href="#" title="Direction"><span class="Direction"><!--Direction--></span></a></th>
                        <th class="From Sortable"><a href="#">$Text{"From"}</a></th>
                        <th class="Subject Sortable"><a href="#">$Text{"Subject"}</a></th>
                        <th class="Created Sortable"><a href="#">$Text{"Created"}</a></th>
                        <th class="Attachments Last"><a href="#" title="$Text{"Attachments"}"><span><!--Attachments--></span></a></th>
                    </tr>
                </thead>
                <tbody>
<!-- dtl:block:TreeItem -->
                    <tr class="$QData{"ClassRow"}" id="Row$LQData{"Count"}">
                        <td class="$QData{"Class"} UnreadArticles Fixed NonTextContent">
<!-- dtl:block:TreeItemNewArticle -->
                            <span class="$QData{"Class"}" title="$Text{"Unread Article!"}">$Text{"Unread Article!"}</span>
<!-- dtl:block:TreeItemNewArticle -->
                        </td>
                        <td class="No">
                            $QData{"Count"}
                            <input type="hidden" class="ArticleInfo" name="Link$LQData{"Count"}" value="$Env{"Baselink"}Action=AgentTicketZoom;Subaction=ArticleUpdate;Count=$LQData{"Count"};TicketID=$QData{"TicketID"};ArticleID=$QData{"ArticleID"};"/>
                            <input type="hidden" class="ArticleID" value="$QData{"ArticleID"}" />
                        </td>
                        <td class="Type"><div title="$Text{"$Data{"SenderType"}"} &ndash; $Text{"$Data{"ArticleType"}"}">$Text{"$Data{"SenderType"}"} &ndash; $Text{"$Data{"ArticleType"}"}</div></td>
                        <td class="Direction">dir</td>
                        <td class="From"><div title="$QData{"From"}"><a href="#">$QData{"FromRealname","34"}</a></div></td>
                        <td class="Subject"><div title="$QData{"Subject"}"><a href="#">$QData{"Subject","36"}</a></div></td>
                        <td class="Created"><a href="#">$TimeShort{"$QData{"Created"}"}</a></td>
                        <td class="Attachments Attachment Fixed NonTextContent">
<!-- dtl:block:TreeItemAttachment -->
                            <a class="Attachment" title="Attachment" rel="TicketAttachment$QData{"Count"}"></a>
                            <div id="TicketAttachment$QData{"Count"}" class="AttachmentData Hidden">
                                <div class="Attachment InnerContent">
<!-- dtl:block:TreeItemAttachmentItem -->
                                    <div class="AttachmentElement">
                                        <h3>
# bugfix for bug#5579 - Spaces in filenames are converted to + characters when downloading in IE.
# $QData{"Filename"} need to be the filename, take care that it is not $LQData{""}
                                            <a href="$Env{"CGIHandle"}/$QData{"Filename"}?Action=AgentTicketAttachment;ArticleID=$LQData{"ArticleID"};FileID=$LQData{"FileID"}" $Data{"Target"}>$QData{"Filename"}</a>
                                        </h3>
                                        <p>$QData{"Filesize"}</p>
                                    </div>
<!-- dtl:block:TreeItemAttachmentItem -->
                                </div>
                            </div>
<!-- dtl:block:TreeItemAttachment -->
                        </td>
                    </tr>
<!-- dtl:block:TreeItem -->
                </tbody>
            </table>
        </div>
        <div class="Handle ui-resizable-handle ui-resizable-s">
            <a href="">Resize</a>
        </div>
    </div>
</div>
<!-- dtl:block:Tree -->

<!-- dtl:block:ArticleItem -->
<div>
    <a name="Article$QData{"ArticleID"}"></a>
    <div class="WidgetBox SpacingTop Expanded">
        <div class="LightRow Header">
            <div class="WidgetAction Toggle"><a href="#" title="$Text{"Show or hide the content."}"><span></span></a></div>
            <h2>#$QData{"Count"} &ndash; $QData{"Subject","60"}</h2>
        </div>
        <div class="LightRow Bottom">
            <ul class="Actions">
<!-- dtl:block:ArticleMenu-->
                <li class="$QData{"Class"}">
                    <a href="$Env{"Baselink"}$Data{"Link"}" class="$QData{"Class"}" $Data{"LinkParam"} title="$Text{"$Data{"Description"}"}">$Text{"$Data{"Name"}"}</a>
                </li>
<!-- dtl:block:ArticleMenu-->
<!-- dtl:block:ArticleReply -->
                <li class="$QData{"Class"}">
                    <form title="$Text{"$Data{"Name"}"}" action="$Env{"CGIHandle"}" method="get" id="$QData{"FormID"}">
                        <input type="hidden" name="Action" value="$QData{"Action"}"/>
                        <input type="hidden" name="TicketID" value="$QData{"TicketID"}"/>
                        <input type="hidden" name="ArticleID" value="$QData{"ArticleID"}"/>
                        <input type="hidden" name="ReplyAll" value="$QData{"ReplyAll"}"/>
                        <label for="ResponseID" class="InvisibleText">$Text{"$Data{"Name"}"}:</label>
                        $Data{"StandardResponsesStrg"}
                    </form>
<!-- dtl:block:ArticleReplyOnLoad -->
<script type="text/javascript">//<![CDATA[
    $('#$QData{"FormID"} select[name=ResponseID]').bind('change', function (Event) {
        var url = Core.Config.Get('Baselink') + $(this).parents().serialize();
        Core.UI.Popup.OpenPopup(url, 'Action');
    });
//]]></script>
<!-- dtl:block:ArticleReplyOnLoad -->
<!-- dtl:block:ArticleReplyStatic -->
<!-- dtl:js_on_document_complete -->
<script type="text/javascript">//<![CDATA[
    $('#$QData{"FormID"} select[name=ResponseID]').bind('change', function (Event) {
        var url = Core.Config.Get('Baselink') + $(this).parents().serialize();
        Core.UI.Popup.OpenPopup(url, 'Action');
    });
//]]></script>
<!-- dtl:js_on_document_complete -->
<!-- dtl:block:ArticleReplyStatic -->
                </li>
<!-- dtl:block:ArticleReply -->
            </ul>
            <div class="ClearLeft"></div>
        </div>
        <div class="Content">
            <div class="ArticleMailHeader">
                <fieldset class="TableLike FixedLabelSmall Tight">
<!-- dtl:block:RowRecipient -->
                    <label>$Text{"$Data{"Key"}"}:</label>
                    <p class="Value" title="$QData{"Value"}">$QData{"Realname","200"}</p>
                    <div class="Clear"></div>
<!-- dtl:block:RowRecipient -->
<!-- dtl:block:RowData -->
                    <label>$Text{"$Data{"Key"}"}:</label>
                    <p class="Value" title="$QData{"Value"}">$QData{"Value","200"}</p>
                    <div class="Clear"></div>
<!-- dtl:block:RowData -->
                    <label>$Text{"Created"}:</label>
                    <p class="Value" title="$TimeLong{"$Data{"Created"}"}">$TimeLong{"$Data{"Created"}"}</p>
                    <div class="Clear"></div>

# show the ArticleFreeKey1-3 and ArticleFreeText1-3
<!-- dtl:block:ArticleFreeText -->
                    <label>$QData{"Key"}:</label>
                    <p class="Value" title="$QData{"Value"}">$QData{"Value","160"}</p>
                    <div class="Clear"></div>
<!-- dtl:block:ArticleFreeText -->

# show article options like signed, crypted, ...
<!-- dtl:block:ArticleOption -->
                    <tr>
                        <td class="contentkey" width="15%">$Text{"$Data{"Key"}"}:</td>
                        <td class="contentvalue" > <div title="$QData{"Value"}" class="$QData{"Result"}">$QData{"Value","160"}</div></td>
                    </tr>
<!-- dtl:block:ArticleOption -->

# show attachments
<!-- dtl:block:ArticleAttachment -->
                    <label>$Text{"Attachment"}:</label>
                    <p class="Value">
<!-- dtl:block:ArticleAttachmentRow -->
<!-- dtl:block:ArticleAttachmentRowLink -->
                        <a href="$Data{"Link"}" $Data{"Target"} title="$Text{"$Data{"Action"}"}">$QData{"Filename"}</a>, $QData{"Filesize"}
<!-- dtl:block:ArticleAttachmentRowLink -->
<!-- dtl:block:ArticleAttachmentRowNoLink -->
                        $QData{"Filename"}, $QData{"Filesize"}
<!-- dtl:block:ArticleAttachmentRowNoLink -->
                        <br />
<!-- dtl:block:ArticleAttachmentRow -->
                    </p>
                    <div class="Clear"></div>
<!-- dtl:block:ArticleAttachment -->
                </fieldset>
            </div>
            <div class="ArticleMailContent">
<!-- dtl:block:BodyPlain -->
$Data{"BodyNote"}
                <div class="message">
$Data{"Body"}
                </div>
<!-- dtl:block:BodyPlain -->
<!-- dtl:block:BodyHTML -->
                <div class="message">
                    <iframe width="100%" height="250" frameborder="0" id="Iframe$QData{"ArticleID"}" onload="Core.Agent.TicketZoom.IframeAutoHeight($('#Iframe$QData{"ArticleID"}'));" src="$Env{"Baselink"}Action=AgentTicketAttachment;Subaction=HTMLView;ArticleID=$QData{"ArticleID"};FileID=$QData{"AttachmentIDOfHTMLBody"}"></iframe>
                </div>
<!-- dtl:block:BodyHTML -->
            </div>
        </div>
    </div>
</div>
<!-- dtl:block:ArticleItem -->


<!-- dtl:js_on_document_complete -->
<script type="text/javascript">//<![CDATA[
    Core.Agent.TicketZoom.Init();
    $('ul.Actions a.AsPopup').bind('click', function (Event) {
        Core.UI.Popup.OpenPopup($(this).attr('href'), 'Action');
        return false;
    });
//]]></script>
<!-- dtl:js_on_document_complete -->
