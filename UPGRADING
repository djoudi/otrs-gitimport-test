# --
# UPGRADING - upgrading OTRS
# Copyright (C) 2001-2008 OTRS AG, http://otrs.org/
# --
# $Id: UPGRADING,v 1.30 2009-02-26 09:58:03 tr Exp $
# --
# This software comes with ABSOLUTELY NO WARRANTY. For details, see
# the enclosed file COPYING for license information (AGPL). If you
# did not receive this file, see http://www.gnu.org/licenses/agpl.txt.
# --

These instructions are for people upgrading OTRS from "2.2" to "2.3".  

If you are running a lower version of OTRS you need to follow the upgrade path
to 2.2 first (1.1->1.2->1.3->2.0->2.1->2.2 ...).


*) Stop all your services (e. g. rcotrs stop-force)

*) Backup everything (database, Kernel/Config.pm, Kernel/Config/GenericAgent.pm, var/*)

*) Make sure that you have backed up everything ;-)

*) If possible try this install on a separate machine, althoug
   I had always only production machines to upgrade

*) Install the new release (tar or RPM)

*) If you use the tar:

    a) the OTRS themes between 2.2 and 2.3 are _not_ compatible
       (don't use the old themes)!

*) Update the database changes with (part 1):
    MySQL:
      cat $OTRS_HOME/scripts/DBUpdate-to-2.3.mysql.sql | mysql -p -f -u root otrs
    PostgreSQL:
      cat $OTRS_HOME/scripts/DBUpdate-to-2.3.postgresql.sql | psql otrs


*) Run the migration script (as OTRS user, _not_ as root):
   You must execute the migration script to migrate some data from the old database
   structure to the new one. Please run $OTRS_HOME/scripts/DBUpdate-to-2.3.pl!

*) Update the database changes with (part 2):
    MySQL:
      cat $OTRS_HOME/scripts/DBUpdate-to-2.3-post.mysql.sql | mysql -p -f -u root otrs
    PostgreSQL:
      cat $OTRS_HOME/scripts/DBUpdate-to-2.3-post.postgresql.sql | psql otrs

*) If _no_ RPM is used, execute $OTRS_HOME/bin/SetPermissions.sh!

*) Restart your services (e. g. rcotrs restart-force or each service manually)

*) Log in as 'root@localhost' and select Admin -> SysConfig to make sure that
   OTRS updates the configuration files.
