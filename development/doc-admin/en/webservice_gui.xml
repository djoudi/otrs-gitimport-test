<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN" "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd">
<!-- $Id: webservice_gui.xml,v 1.9 2011-07-27 17:45:12 cg Exp $ -->

<section id="webservice_gui">
    <title>Web Service Graphical Interface</title>
    <para>
        The web service graphical user interface (GUI) is a great tool that allow us to construct
        complex web service configurations in a friendly and nice interface, with it is possible to:
    </para>
    <para>
        <itemizedlist>
            <listitem>
                <para>
                    Create and Delete web services.
                </para>
            </listitem>
            <listitem>
                <para>
                    Import and Export configurations (in YAML file format) for existing web
                    services.
                </para>
            </listitem>
            <listitem>
                <para>
                    View, Revert and Export old configurations for existing web services in the
                    Web Service History screen.
                </para>
            </listitem>
            <listitem>
                <para>
                    Track all communication logs for each web service in the Debugger screen.
                </para>
            </listitem>
        </itemizedlist>
    </para>

    <section id="webservice_gui_overview">
        <title>Web Service Overview</title>
        <para>
            The "Web Services" link in the main screen of Admin Interface (in the System
            Administration box) leads to the web services overview screen, where you are able to
            manage your web service configurations. You can add new web services or change the
            configuration for the existing ones from this screen.
        </para>
        <note>
            <para>
                To create a new web service, press the button "Add web service", and provide the
                needed information.
            </para>
        </note>
        <para>
            <screenshot>
                <screeninfo>Web Service Overview</screeninfo>
                <graphic srccredit="Adminarea web service - screenshot" scale="40" fileref="screenshots/admin-webservice-overview.png"></graphic>
            </screenshot>
        </para>
        <para>
            <emphasis>Figure: Web services overview.</emphasis>
        </para>
    </section>

    <section id="webservice_gui_add">
        <title>Web Service Add</title>
        <para>
            The only required field in this part is the web service "Name" that needs to be unique
            in the system and non empty. Other fields are also necessary for the configuration like
            the "Debug Threshold" and "Validity" but this fields are already filled with the default
            value from each list.
        </para>
        <para>
            The default value for "Debug Threshold" is "debug", under this configuration all
            communication logs are registered in the database, each Debug Threshold value is more
            restrictive and discard communication logs set for lower values.
        </para>
        <para>
            <itemizedlist>
                <title>Debug Threshold levels (from lower to upper)</title>
                <listitem>
                    <para>
                        Debug
                    </para>
                </listitem>
                <listitem>
                    <para>
                        Info
                    </para>
                </listitem>
                <listitem>
                    <para>
                        Notice
                    </para>
                </listitem>
                <listitem>
                    <para>
                        Error
                    </para>
                </listitem>
            </itemizedlist>
        </para>
        <para>
            It is also possible at this time to define the network transport protocol for "OTRS as
            Provider" and "OTRS as requester".
        </para>
        <para>
            Click on "Save" button to register the new web service in the database or click "Cancel"
            to discard this operation. On both cases you will be returned to the web service
            overview screen.
        </para>
        <para>
            If you already have a web service configuration file in YAML format you can click
            on the "Import web service" button on the left side of the screen. for more information
            on importing web services please check the next section "Web Service Change".
        </para>
        <note>
            <para>
                To change or add more details to a web service, click on the web service name in the
                web service overview screen.
            </para>
        </note>
        <para>
            <screenshot>
                <screeninfo>Web service add</screeninfo>
                <graphic srccredit="Adminarea web service add - screenshot" scale="40" fileref="screenshots/admin-webservice-add.png"></graphic>
            </screenshot>
        </para>
        <para>
            <emphasis>Figure: Web services add.</emphasis>
        </para>
    </section>

    <section id="webservice_gui_change">
        <title>Web Service Change</title>
        <para>
            On this screen you have a complete set of functions to handle every part of a web
            service, on the left side in the action column you can found some buttons that allows
            you to perform all possible actions over a web service:
        </para>
        <para>
        <itemizedlist>
            <listitem>
                <para>
                    Clone web service.
                </para>
            </listitem>
            <listitem>
                <para>
                    Export web service.
                </para>
            </listitem>
            <listitem>
                <para>
                    Import web service.
                </para>
            </listitem>
            <listitem>
                <para>
                    Configuration History.
                </para>
            </listitem>
            <listitem>
                <para>
                    Delete webservice.
                </para>
            </listitem>
            <listitem>
                <para>
                    Debugger.
                </para>
            </listitem>
        </itemizedlist>
        </para>
        <note>
            <para>
                "Configuration history" and "Debugger" will lead you to different screens.
            </para>
        </note>

        <section id="webservice-clone">
            <title>Web Service Clone</title>
            <para>
                To clone a web service, you need to click on the "Clone web service" button, a
                dialog will be shown where you can use the default name or set a new name for the
                (cloned) web service.
            </para>
            <note>
                <para>
                    <emphasis>Remember </emphasis> the name of the web service must be unique within
                    the system.
                </para>
            </note>
            <para>Click on "Clone" button to create the web service clone or "Cancel" to close
            the dialog.</para>
            <para>
                <screenshot>
                    <screeninfo>Web service clone</screeninfo>
                    <graphic srccredit="Adminarea web service clone - screenshot" scale="40" fileref="screenshots/admin-webservice-clone.png"></graphic>
                </screenshot>
            </para>
            <para>
                <emphasis>Figure: Web service clone.</emphasis>
            </para>
        </section>

        <section id="webservice-export">
            <title>Web Service Export</title>
            <para>
                The "Export web service" button give you the opportunity to dump the configuration
                of the current web service into a YAML file, download it and store it on your file
                system. This can be specialy useful if you want to migrate the web service from one
                server to another, for example from a testing environment to a production system.
            </para>
            <warning>
                <para>
                    All stored passwords in the web service configuration will be exported as plain
                    text.
                </para>
            </warning>
            <para>
                Right after clicking the "Export web service" button a save dialog from your
                browser will appear (just like when you click on a downloadable file on a web page).
            </para>
            <note>
                <para>
                    Each browser on each operating system has it own save dialog screen and style,
                    depending on the browser and its configuration it is possible that no dialog is
                    shown and the file is saved on a default directory on your file system. please
                    check your browser documentation to know more about how it handle the
                    downloadable files.
                </para>
            </note>
            <para>
                <screenshot>
                    <screeninfo>Web service export</screeninfo>
                    <graphic srccredit="Adminarea web service export - screenshot" scale="40" fileref="screenshots/admin-webservice-export.png"></graphic>
                </screenshot>
            </para>
            <para>
                <emphasis>Figure: Web services export.</emphasis>
            </para>
        </section>

        <section id="webservice-import">
            <title>Web Service Import</title>
            <para>
                A valid web service configuration YAML file is required to use the import web
                service feature, click on the "Import web service" button, browse for the
                configuration file or set the complete path on the input box.
            </para>
            <para>
                Click "Import" button to crate a new web service form a file or "Cancel"  to close
                the dialog.
            </para>
            <note>
                <para>
                    The web service name will be taken from the configuration file name (e.g. if the
                    file name is MyWebservice.yml the resulting web service will be named
                    MyWebservice). If a web service is registered in the system with the same name
                    as the web service that you want to import, the system will lead you to the
                    web service change screen to let you change the name of the imported web
                    service.
                </para>
            </note>
            <para>
                <screenshot>
                    <screeninfo>Web service import</screeninfo>
                    <graphic srccredit="Adminarea web service import - screenshot" scale="40" fileref="screenshots/admin-webservice-import.png"></graphic>
                </screenshot>
            </para>
            <para>
                <emphasis>Figure: Web services import.</emphasis>
            </para>
        </section>

        <section id="webservice-delete">
            <title>Web Service Delete</title>
            <para>
                Some times its necessary to delete completeatly a web service, if you are in one of
                this cases you can press on the "Delete web service" button and a new dialog will
                appear asking if you are sure to delete the web service.
            </para>
            <para>
                Clink on "Delete" to confirm the removal of the web service or on "Cancel" to close
                the dialog.
            </para>
            <warning>
                <para>
                    Delete a web service can't be undone, please be careful when delete a
                    webservice.
                </para>
            </warning>
            <para>
                <screenshot>
                    <screeninfo>Web service delete</screeninfo>
                    <graphic srccredit="Adminarea web service delete - screenshot" scale="40" fileref="screenshots/admin-webservice-delete.png"></graphic>
                </screenshot>
            </para>
            <para>
                <emphasis>Figure: Web service delete.</emphasis>
            </para>
        </section>

<!-- TODO add link to Configuration History -->
<!-- TODO add link to Debugger -->

        <section id="webservice-configuration-change">
            <title>Web Service Configuration Change</title>
            <para>
                Returning to the web service change screen, now we are going to review the right
                side of it, where we have the possibility to modify all the general data for a web
                service like, name, description, debug threshold, etc. Also there are two more
                sections below that allows us to modify specific parameters for both communication
                types "OTRS as Provider" and "OTRS as Requester".
            </para>
            <para>
                The web service configuration needs to be saved on each level, this means that if a
                setting is changed, links to other deeper parts of the configuration will be
                disabled forcing to save the current configuration level. After saving the disabled
                links will be re-enabled again allowing you to continue with the configuration.
            </para>
            <para>
                On the "OTRS as provider" section it is possible to set or configure the network
                transport protocol, only previosly registered network transport backends are shown
                on the list. To configure the network transport click on the "Configure" button.
                It is also possible to add new operations in this box, to do this select one of the
                available operations from the "Add Operation" list, this will lead you to the
                operation configuration screen. After saving the new operation it will be listed on
                the table avobe.
            </para>
            <para>
                "OTRS as requester" is very similar to the previos one, but instead of operations
                you are able to add invokers
            </para>
            <para>
                Click the "Save" button to save and continue configuring the web service, or "Save
                and finish" to save and return to the web service overview screen, or "Cancel" to
                discard current configuration level changes and return to web service overview
                screen.
            </para>
            <para>
                <screenshot>
                    <screeninfo>Web service change</screeninfo>
                    <graphic srccredit="Adminarea web service change - screenshot" scale="40" fileref="screenshots/admin-webservice-change.png"></graphic>
                </screenshot>
            </para>
            <para>
                <emphasis>Figure: Web services change.</emphasis>
            </para>
        </section>

        <section id="webservice-provider-transport">
            <title>Web Service Provider Transport</title>
            <para>
                For network transport configuration you can choice from some different types of
                transport, each one have different option to configure, here we are going to check
                one of the most commoun types, the SOAP transport.
            </para>
            <para>
                For this option it's very simple to complete it, only a 'Namespace' and
                'Maximum message length' fields are requiered. The first one is a URI to give SOAP
                methods a context, reducing ambiguities, and the second one it's a field where you
                can specify the maximum size (in bytes) of SOAP messages that OTRS will process.
            </para>
            <para>
                For this screen and for the rest involved on web services you will see a single
                "Save" button on add actions but for edit actions, one more button will show it next
                to the firt one, the "Save and finish" button give you the possibility to save and go
                back to the previous screen, for this case you will go back to webservice change screen.
            </para>
            <para>
                <screenshot>
                    <screeninfo>Web service provider transport</screeninfo>
                    <graphic srccredit="Adminarea web service provider transport - screenshot" scale="40" fileref="screenshots/admin-webservice-provider-transport.png"></graphic>
                </screenshot>
            </para>
            <para>
                <emphasis>Figure: Web service provider transport.</emphasis>
            </para>
        </section>

        <section id="webservice-operation">
            <title>Web Service Operation</title>
            <para>
                The actions that can be performed when you are using OTRS as a provider are called
                "Operations", it's possible to configure different parameters .
            </para>
            <para>
                Apart from a name and a description is also possible to select what type of mapping
                do you wanto to use for inbound and outbound data. The complete mapping configuraton
                is done in a separated screen, depending on the mapping type.
            </para>
            <para>
                The operation backend is pre-filled and is not editable, you set this parameter when
                you choose the operation on the web service edit screen.
            </para>
            <para>
                On the action column you have the options to go back to the web service change screen
                or you can delete the operation from the web service configuration pressing the "Delete"
                button and confirm the action with the "Delete" button.
            </para>
            <para>
                <screenshot>
                    <screeninfo>Web service operation</screeninfo>
                    <graphic srccredit="Adminarea web service operation - screenshot" scale="40" fileref="screenshots/admin-webservice-operation.png"></graphic>
                </screenshot>
            </para>
            <para>
                <emphasis>Figure: Web service operation.</emphasis>
            </para>
        </section>

        <section id="webservice-requester-transport">
            <title>Web Service Provider Transport</title>
            <para>
                The network transport configuration for the requester it's simmilar to the configuration
                for invoker but here you have some more fields to fill for the SOAP transport.
            </para>
            <para>
                Apart from the endpoint and namespace that are required, exists the option to configure
                the enconding for the SOAP message contents, choose if you want to fill the SOAP action header
                and a SOAP action separator, an authentication mechanism and the necessary parameters for it.
            </para>
            <para>
                Also like in other screens you have the "Save" button for add and the extra "Save and finish"
                button for change action.
            </para>
            <para>
                <screenshot>
                    <screeninfo>Web service provider transport</screeninfo>
                    <graphic srccredit="Adminarea web service reuester transport - screenshot" scale="40" fileref="screenshots/admin-webservice-requester-transport.png"></graphic>
                </screenshot>
            </para>
            <para>
                <emphasis>Figure: Web service requester transport.</emphasis>
            </para>
        </section>

        <section id="webservice-invoker">
            <title>Web Service Invoker</title>
            <para>
                Invokers are the actions can be performed by OTRS as a requester, it's possible to
                configure different parameters for them.
            </para>
            <para>
                Here you have the same possibility like in operations to set a name a description
                the mapping type do you wanto to use for inbound and outbound data. The complete
                mapping configuraton is done in a separated screen, depending on the mapping type.
            </para>
            <para>
                The invoker backend is pre-filled and is not editable, you set this parameter when
                you choose the operation on the web service edit screen.
            </para>
            <para>
                The necessary stuff for event handling could be configured on this screen, choose the
                requered parameters for add an event trigger and push the "+" button to add a new event.
            </para>
            <para>
                On the action column you have the options to go back to the web service change screen
                or pressing the "Delete" button you can delete the invoker from the web service
                configuration  just confirm the action with the "Delete" button or cancel.
            </para>
            <para>
                <screenshot>
                    <screeninfo>Web service invoker</screeninfo>
                    <graphic srccredit="Adminarea web service invoker - screenshot" scale="40" fileref="screenshots/admin-webservice-invoker.png"></graphic>
                </screenshot>
            </para>
            <para>
                <emphasis>Figure: Web service invoker.</emphasis>
            </para>
        </section>

    </section>
</section>