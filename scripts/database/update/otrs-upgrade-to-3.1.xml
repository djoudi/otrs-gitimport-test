<?xml version="1.0" encoding="utf-8" ?>
<database Name="otrs">
    <TableAlter Name="ticket_index">
        <ColumnChange NameOld="queue" NameNew="queue" Required="true" Size="200" Type="VARCHAR"/>
        <ColumnChange NameOld="s_state" NameNew="s_state" Required="true" Size="200" Type="VARCHAR"/>
        <ColumnChange NameOld="s_lock" NameNew="s_lock" Required="true" Size="200" Type="VARCHAR"/>
    </TableAlter>

<TableCreate Name="gi_webservice_config">
    <Column Name="id" Required="true" PrimaryKey="true" AutoIncrement="true" Type="INTEGER"/>
    <Column Name="name" Required="true" Size="200" Type="VARCHAR"/>
    <Column Name="config" Required="true" Type="LONGBLOB"/>
    <Column Name="config_md5" Required="true" Size="32" Type="VARCHAR"/>
    <Column Name="valid_id" Required="true" Type="SMALLINT"/>
    <Column Name="create_time" Required="true" Type="DATE"/>
    <Column Name="create_by" Required="true" Type="INTEGER"/>
    <Column Name="change_time" Required="true" Type="DATE"/>
    <Column Name="change_by" Required="true" Type="INTEGER"/>
    <Unique Name="gi_webservice_config_name">
        <UniqueColumn Name="name"/>
    </Unique>
    <Unique Name="gi_webservice_config_config_md5">
        <UniqueColumn Name="config_md5"/>
    </Unique>
    <ForeignKey ForeignTable="valid">
        <Reference Local="valid_id" Foreign="id"/>
    </ForeignKey>
    <ForeignKey ForeignTable="users">
        <Reference Local="create_by" Foreign="id"/>
        <Reference Local="change_by" Foreign="id"/>
    </ForeignKey>
</TableCreate>

<TableCreate Name="gi_webservice_config_history">
    <Column Name="id" Required="true" PrimaryKey="true" AutoIncrement="true" Type="BIGINT"/>
    <Column Name="config_id" Required="true" Type="INTEGER"/>
    <Column Name="config" Required="true" Type="LONGBLOB"/>
    <Column Name="config_md5" Required="true" Size="32" Type="VARCHAR"/>
    <Column Name="create_time" Required="true" Type="DATE"/>
    <Column Name="create_by" Required="true" Type="INTEGER"/>
    <Column Name="change_time" Required="true" Type="DATE"/>
    <Column Name="change_by" Required="true" Type="INTEGER"/>
    <Unique Name="gi_webservice_config_history_config_md5">
        <UniqueColumn Name="config_md5"/>
    </Unique>
    <ForeignKey ForeignTable="gi_webservice_config">
        <Reference Local="config_id" Foreign="id"/>
    </ForeignKey>
    <ForeignKey ForeignTable="users">
        <Reference Local="create_by" Foreign="id"/>
        <Reference Local="change_by" Foreign="id"/>
    </ForeignKey>
</TableCreate>

<TableCreate Name="scheduler_task_list">
    <Column Name="id" Required="true" PrimaryKey="true" AutoIncrement="true" Type="BIGINT"/>
    <Column Name="task_data" Required="true" Size="8000" Type="VARCHAR"/>
    <Column Name="task_data_md5" Required="true" Size="32" Type="VARCHAR"/>
    <Column Name="task_type" Required="true" Size="200" Type="VARCHAR"/>
    <Column Name="due_time" Required="true" Type="DATE"/>
    <Column Name="create_time" Required="true" Type="DATE"/>
    <Unique Name="scheduler_task_list_task_data_md5">
        <UniqueColumn Name="task_data_md5"/>
    </Unique>
</TableCreate>

<TableCreate Name="gi_debugger_entry">
    <Column Name="id" Required="true" PrimaryKey="true" AutoIncrement="true" Type="BIGINT"/>
    <Column Name="communication_id" Required="true" Size="32" Type="VARCHAR"/>
    <Column Name="communication_type" Required="true" Size="50" Type="VARCHAR"/>
    <Column Name="remote_ip" Required="false" Size="50" Type="VARCHAR"/>
    <Column Name="webservice_id" Required="true" Type="INTEGER"/>
    <Column Name="create_time" Required="true" Type="DATE"/>
    <Unique Name="gi_debugger_entry_communication_id">
        <UniqueColumn Name="communication_id"/>
    </Unique>
    <Index Name="gi_debugger_entry_create_time">
        <IndexColumn Name="create_time"/>
    </Index>
    <ForeignKey ForeignTable="gi_webservice_config">
        <Reference Local="webservice_id" Foreign="id"/>
    </ForeignKey>
</TableCreate>

<TableCreate Name="gi_debugger_entry_content">
    <Column Name="id" Required="true" PrimaryKey="true" AutoIncrement="true" Type="BIGINT"/>
    <Column Name="gi_debugger_entry_id" Required="true" Type="BIGINT"/>
    <Column Name="debug_level" Required="true" Size="50" Type="VARCHAR"/>
    <Column Name="subject" Required="true" Size="255" Type="VARCHAR"/>
    <Column Name="content" Required="false" Type="LONGBLOB"/>
    <Column Name="create_time" Required="true" Type="DATE"/>
    <Index Name="gi_debugger_entry_content_create_time">
        <IndexColumn Name="create_time"/>
    </Index>
    <Index Name="gi_debugger_entry_content_debug_level">
        <IndexColumn Name="debug_level"/>
    </Index>
    <ForeignKey ForeignTable="gi_debugger_entry">
        <Reference Local="gi_debugger_entry_id" Foreign="id"/>
    </ForeignKey>
</TableCreate>

<TableCreate Name="object_lock_state">
    <Column Name="object_type" Required="true" Size="30" Type="VARCHAR"/>
    <Column Name="object_id" Required="true" Type="BIGINT"/>
    <Column Name="lock_state" Required="true" Size="30" Type="VARCHAR"/>
    <Column Name="lock_state_counter" Required="true" Type="INTEGER"/>
    <Column Name="create_time" Required="true" Type="DATE"/>
    <Column Name="change_time" Required="true" Type="DATE"/>
    <Unique>
        <UniqueColumn Name="object_type"/>
        <UniqueColumn Name="object_id"/>
    </Unique>
    <Index Name="object_lock_state_list_state">
        <IndexColumn Name="object_type"/>
        <IndexColumn Name="object_id"/>
        <IndexColumn Name="lock_state"/>
    </Index>
</TableCreate>


</database>
